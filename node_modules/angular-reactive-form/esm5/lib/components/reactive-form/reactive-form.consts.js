/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
/** @type {?} */
export var VALIDATOR_REQUIRED = 'required';
/** @type {?} */
export var VALIDATOR_PATTERN = 'pattern';
/** @type {?} */
export var VALIDATOR_MINLENGTH = 'minlength';
/** @type {?} */
export var VALIDATOR_MAXLENGTH = 'maxlength';
import * as _ from 'lodash';
/** @type {?} */
export var UpdateFormValue = (/**
 * @param {?} inputs
 * @param {?} data
 * @param {?=} options
 * @return {?}
 */
function (inputs, data, options) {
    // tslint:disable-next-line:max-line-length
    /** @type {?} */
    var ableSimpleValue = [
        'textbox',
        'dropdown',
        'radio',
        'checkbox',
        'datetimepicker',
        'uploadfile',
        'phonecode',
        'textarea',
        'textbox-mask',
        'tinymce',
        'single-select2',
        'selection-by-api',
        'switch-input',
        'uploadfilev2'
    ];
    _.forEach(data, (/**
     * @param {?} value
     * @param {?} key
     * @return {?}
     */
    function (value, key) {
        inputs = _.map(inputs, (/**
         * @param {?} input
         * @return {?}
         */
        function (input) {
            if (input.key === key) {
                if (_.includes(ableSimpleValue, input.controlType)) {
                    input.value = value;
                    return input;
                }
                switch (input.controlType) {
                    case 'list-checkbox':
                        input.options = input.options.map((/**
                         * @param {?} item
                         * @return {?}
                         */
                        function (item) {
                            var e_1, _a;
                            try {
                                for (var value_1 = tslib_1.__values(value), value_1_1 = value_1.next(); !value_1_1.done; value_1_1 = value_1.next()) {
                                    var i = value_1_1.value;
                                    if (item.value === i) {
                                        item.checked = true;
                                    }
                                }
                            }
                            catch (e_1_1) { e_1 = { error: e_1_1 }; }
                            finally {
                                try {
                                    if (value_1_1 && !value_1_1.done && (_a = value_1.return)) _a.call(value_1);
                                }
                                finally { if (e_1) throw e_1.error; }
                            }
                            return item;
                        }));
                        return input;
                        break;
                    case 'select2':
                        input.options = input.options.map((/**
                         * @param {?} item
                         * @return {?}
                         */
                        function (item) {
                            var e_2, _a;
                            try {
                                for (var value_2 = tslib_1.__values(value), value_2_1 = value_2.next(); !value_2_1.done; value_2_1 = value_2.next()) {
                                    var i = value_2_1.value;
                                    if (item.value === i) {
                                        item.selected = true;
                                    }
                                }
                            }
                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                            finally {
                                try {
                                    if (value_2_1 && !value_2_1.done && (_a = value_2.return)) _a.call(value_2);
                                }
                                finally { if (e_2) throw e_2.error; }
                            }
                            return item;
                        }));
                        return input;
                        break;
                }
            }
            return input;
        }));
    }));
    return inputs;
});
/** @type {?} */
export var UpdateInputsValue = (/**
 * @param {?} inputs
 * @param {?} data
 * @return {?}
 */
function (inputs, data) {
    /** @type {?} */
    var ableType = ['dropdown', 'radio', 'list-checkbox', 'select2', 'single-select2'];
    _.forEach(data, (/**
     * @param {?} value
     * @param {?} key
     * @return {?}
     */
    function (value, key) {
        _.forEach(inputs, (/**
         * @param {?} input
         * @return {?}
         */
        function (input) {
            if (input.key === key) {
                if (_.includes(ableType, input.controlType)) {
                    input.options = value;
                }
                if (input.controlType === 'dropdown') {
                    input.value = _.head(value);
                }
                if (input.controlType === 'radio') {
                    input.value = _.head(value).value;
                }
            }
        }));
    }));
    return inputs;
});
var Support = /** @class */ (function () {
    function Support() {
        this.UpdateInputsValue = (/**
         * @param {?} inputs
         * @param {?} data
         * @return {?}
         */
        function (inputs, data) {
            /** @type {?} */
            var ableType = ['dropdown', 'radio', 'list-checkbox', 'select2', 'single-select2'];
            _.forEach(data, (/**
             * @param {?} value
             * @param {?} key
             * @return {?}
             */
            function (value, key) {
                _.forEach(inputs, (/**
                 * @param {?} input
                 * @return {?}
                 */
                function (input) {
                    if (input.key === key) {
                        if (_.includes(ableType, input.controlType)) {
                            input.options = value;
                        }
                        if (input.controlType === 'dropdown') {
                            input.value = _.head(value);
                        }
                        if (input.controlType === 'radio') {
                            input.value = _.head(value).value;
                        }
                    }
                }));
            }));
            return inputs;
        });
        this.UpdateFormValue = (/**
         * @param {?} inputs
         * @param {?} data
         * @param {?=} options
         * @return {?}
         */
        function (inputs, data, options) {
            // tslint:disable-next-line:max-line-length
            /** @type {?} */
            var ableSimpleValue = [
                'textbox',
                'dropdown',
                'radio',
                'checkbox',
                'datetimepicker',
                'uploadfile',
                'phonecode',
                'textarea',
                'textbox-mask',
                'tinymce',
                'single-select2',
                'selection-by-api',
                'switch-input',
                'uploadfilev2'
            ];
            _.forEach(data, (/**
             * @param {?} value
             * @param {?} key
             * @return {?}
             */
            function (value, key) {
                inputs = _.map(inputs, (/**
                 * @param {?} input
                 * @return {?}
                 */
                function (input) {
                    if (input.key === key) {
                        if (_.includes(ableSimpleValue, input.controlType)) {
                            input.value = value;
                        }
                        switch (input.controlType) {
                            case 'list-checkbox':
                                input.options = input.options.map((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                function (item) {
                                    var e_3, _a;
                                    try {
                                        for (var value_3 = tslib_1.__values(value), value_3_1 = value_3.next(); !value_3_1.done; value_3_1 = value_3.next()) {
                                            var i = value_3_1.value;
                                            if (item.value === i) {
                                                item.checked = true;
                                            }
                                        }
                                    }
                                    catch (e_3_1) { e_3 = { error: e_3_1 }; }
                                    finally {
                                        try {
                                            if (value_3_1 && !value_3_1.done && (_a = value_3.return)) _a.call(value_3);
                                        }
                                        finally { if (e_3) throw e_3.error; }
                                    }
                                    return item;
                                }));
                                break;
                            case 'select2':
                                input.options = input.options.map((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                function (item) {
                                    var e_4, _a;
                                    try {
                                        for (var value_4 = tslib_1.__values(value), value_4_1 = value_4.next(); !value_4_1.done; value_4_1 = value_4.next()) {
                                            var i = value_4_1.value;
                                            if (item.value === i) {
                                                item.selected = true;
                                            }
                                        }
                                    }
                                    catch (e_4_1) { e_4 = { error: e_4_1 }; }
                                    finally {
                                        try {
                                            if (value_4_1 && !value_4_1.done && (_a = value_4.return)) _a.call(value_4);
                                        }
                                        finally { if (e_4) throw e_4.error; }
                                    }
                                    return item;
                                }));
                                break;
                        }
                    }
                    else {
                        input.value = input.value;
                    }
                    return input;
                }));
            }));
            return inputs;
        });
    }
    return Support;
}());
if (false) {
    /** @type {?} */
    Support.prototype.UpdateInputsValue;
    /** @type {?} */
    Support.prototype.UpdateFormValue;
}
/** @type {?} */
export var support = new Support();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVhY3RpdmUtZm9ybS5jb25zdHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9hbmd1bGFyLXJlYWN0aXZlLWZvcm0vIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9yZWFjdGl2ZS1mb3JtL3JlYWN0aXZlLWZvcm0uY29uc3RzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQU0sS0FBTyxrQkFBa0IsR0FBRyxVQUFVOztBQUM1QyxNQUFNLEtBQU8saUJBQWlCLEdBQUcsU0FBUzs7QUFDMUMsTUFBTSxLQUFPLG1CQUFtQixHQUFHLFdBQVc7O0FBQzlDLE1BQU0sS0FBTyxtQkFBbUIsR0FBRyxXQUFXO0FBRTlDLE9BQU8sS0FBSyxDQUFDLE1BQU0sUUFBUSxDQUFDOztBQUU1QixNQUFNLEtBQU8sZUFBZTs7Ozs7O0FBQUcsVUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLE9BQVk7OztRQUVsRCxlQUFlLEdBQUc7UUFDdEIsU0FBUztRQUNULFVBQVU7UUFDVixPQUFPO1FBQ1AsVUFBVTtRQUNWLGdCQUFnQjtRQUNoQixZQUFZO1FBQ1osV0FBVztRQUNYLFVBQVU7UUFDVixjQUFjO1FBQ2QsU0FBUztRQUNULGdCQUFnQjtRQUNoQixrQkFBa0I7UUFDbEIsY0FBYztRQUNkLGNBQWM7S0FDZjtJQUNELENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSTs7Ozs7SUFBRSxVQUFTLEtBQUssRUFBRSxHQUFHO1FBQ2pDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU07Ozs7UUFBRSxVQUFBLEtBQUs7WUFDMUIsSUFBSSxLQUFLLENBQUMsR0FBRyxLQUFLLEdBQUcsRUFBRTtnQkFDckIsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLGVBQWUsRUFBRSxLQUFLLENBQUMsV0FBVyxDQUFDLEVBQUU7b0JBQ2xELEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO29CQUNwQixPQUFPLEtBQUssQ0FBQztpQkFDZDtnQkFDRCxRQUFRLEtBQUssQ0FB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cURDOzs7QUFHSCxNQUFNLEtBQU8sT0FBTyxHQUFHLElBQUksT0FBTyxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IFZBTElEQVRPUl9SRVFVSVJFRCA9ICdyZXF1aXJlZCc7XG5leHBvcnQgY29uc3QgVkFMSURBVE9SX1BBVFRFUk4gPSAncGF0dGVybic7XG5leHBvcnQgY29uc3QgVkFMSURBVE9SX01JTkxFTkdUSCA9ICdtaW5sZW5ndGgnO1xuZXhwb3J0IGNvbnN0IFZBTElEQVRPUl9NQVhMRU5HVEggPSAnbWF4bGVuZ3RoJztcblxuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgY29uc3QgVXBkYXRlRm9ybVZhbHVlID0gKGlucHV0cywgZGF0YSwgb3B0aW9ucz86IHt9KSA9PiB7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcbiAgY29uc3QgYWJsZVNpbXBsZVZhbHVlID0gW1xuICAgICd0ZXh0Ym94JyxcbiAgICAnZHJvcGRvd24nLFxuICAgICdyYWRpbycsXG4gICAgJ2NoZWNrYm94JyxcbiAgICAnZGF0ZXRpbWVwaWNrZXInLFxuICAgICd1cGxvYWRmaWxlJyxcbiAgICAncGhvbmVjb2RlJyxcbiAgICAndGV4dGFyZWEnLFxuICAgICd0ZXh0Ym94LW1hc2snLFxuICAgICd0aW55bWNlJyxcbiAgICAnc2luZ2xlLXNlbGVjdDInLFxuICAgICdzZWxlY3Rpb24tYnktYXBpJyxcbiAgICAnc3dpdGNoLWlucHV0JyxcbiAgICAndXBsb2FkZmlsZXYyJ1xuICBdO1xuICBfLmZvckVhY2goZGF0YSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgIGlucHV0cyA9IF8ubWFwKGlucHV0cywgaW5wdXQgPT4ge1xuICAgICAgaWYgKGlucHV0LmtleSA9PT0ga2V5KSB7XG4gICAgICAgIGlmIChfLmluY2x1ZGVzKGFibGVTaW1wbGVWYWx1ZSwgaW5wdXQuY29udHJvbFR5cGUpKSB7XG4gICAgICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChpbnB1dC5jb250cm9sVHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2xpc3QtY2hlY2tib3gnOlxuICAgICAgICAgICAgaW5wdXQub3B0aW9ucyA9IGlucHV0Lm9wdGlvbnMubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gaSkge1xuICAgICAgICAgICAgICAgICAgaXRlbS5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3NlbGVjdDInOlxuICAgICAgICAgICAgaW5wdXQub3B0aW9ucyA9IGlucHV0Lm9wdGlvbnMubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gaSkge1xuICAgICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGlucHV0cztcbn07XG5cbmV4cG9ydCBjb25zdCBVcGRhdGVJbnB1dHNWYWx1ZSA9IChpbnB1dHMsIGRhdGEpID0+IHtcbiAgY29uc3QgYWJsZVR5cGUgPSBbJ2Ryb3Bkb3duJywgJ3JhZGlvJywgJ2xpc3QtY2hlY2tib3gnLCAnc2VsZWN0MicsICdzaW5nbGUtc2VsZWN0MiddO1xuICBfLmZvckVhY2goZGF0YSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgIF8uZm9yRWFjaChpbnB1dHMsIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICBpZiAoaW5wdXQua2V5ID09PSBrZXkpIHtcbiAgICAgICAgaWYgKF8uaW5jbHVkZXMoYWJsZVR5cGUsIGlucHV0LmNvbnRyb2xUeXBlKSkge1xuICAgICAgICAgIGlucHV0Lm9wdGlvbnMgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQuY29udHJvbFR5cGUgPT09ICdkcm9wZG93bicpIHtcbiAgICAgICAgICBpbnB1dC52YWx1ZSA9IF8uaGVhZCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0LmNvbnRyb2xUeXBlID09PSAncmFkaW8nKSB7XG4gICAgICAgICAgaW5wdXQudmFsdWUgPSBfLmhlYWQodmFsdWUpLnZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gaW5wdXRzO1xufTtcblxuY2xhc3MgU3VwcG9ydCB7XG4gIFVwZGF0ZUlucHV0c1ZhbHVlID0gKGlucHV0cywgZGF0YSkgPT4ge1xuICAgIGNvbnN0IGFibGVUeXBlID0gWydkcm9wZG93bicsICdyYWRpbycsICdsaXN0LWNoZWNrYm94JywgJ3NlbGVjdDInLCAnc2luZ2xlLXNlbGVjdDInXTtcbiAgICBfLmZvckVhY2goZGF0YSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgXy5mb3JFYWNoKGlucHV0cywgZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0LmtleSA9PT0ga2V5KSB7XG4gICAgICAgICAgaWYgKF8uaW5jbHVkZXMoYWJsZVR5cGUsIGlucHV0LmNvbnRyb2xUeXBlKSkge1xuICAgICAgICAgICAgaW5wdXQub3B0aW9ucyA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaW5wdXQuY29udHJvbFR5cGUgPT09ICdkcm9wZG93bicpIHtcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gXy5oZWFkKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlucHV0LmNvbnRyb2xUeXBlID09PSAncmFkaW8nKSB7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IF8uaGVhZCh2YWx1ZSkudmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRzO1xuICB9XG5cbiAgVXBkYXRlRm9ybVZhbHVlID0gKGlucHV0cywgZGF0YSwgb3B0aW9ucz86IHt9KSA9PiB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuICAgIGNvbnN0IGFibGVTaW1wbGVWYWx1ZSA9IFtcbiAgICAgICd0ZXh0Ym94JyxcbiAgICAgICdkcm9wZG93bicsXG4gICAgICAncmFkaW8nLFxuICAgICAgJ2NoZWNrYm94JyxcbiAgICAgICdkYXRldGltZXBpY2tlcicsXG4gICAgICAndXBsb2FkZmlsZScsXG4gICAgICAncGhvbmVjb2RlJyxcbiAgICAgICd0ZXh0YXJlYScsXG4gICAgICAndGV4dGJveC1tYXNrJyxcbiAgICAgICd0aW55bWNlJyxcbiAgICAgICdzaW5nbGUtc2VsZWN0MicsXG4gICAgICAnc2VsZWN0aW9uLWJ5LWFwaScsXG4gICAgICAnc3dpdGNoLWlucHV0JyxcbiAgICAgICd1cGxvYWRmaWxldjInXG4gICAgXTtcbiAgICBfLmZvckVhY2goZGF0YSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgaW5wdXRzID0gXy5tYXAoaW5wdXRzLCBpbnB1dCA9PiB7XG4gICAgICAgIGlmIChpbnB1dC5rZXkgPT09IGtleSkge1xuICAgICAgICAgIGlmIChfLmluY2x1ZGVzKGFibGVTaW1wbGVWYWx1ZSwgaW5wdXQuY29udHJvbFR5cGUpKSB7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzd2l0Y2ggKGlucHV0LmNvbnRyb2xUeXBlKSB7XG4gICAgICAgICAgICBjYXNlICdsaXN0LWNoZWNrYm94JzpcbiAgICAgICAgICAgICAgaW5wdXQub3B0aW9ucyA9IGlucHV0Lm9wdGlvbnMubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0udmFsdWUgPT09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3NlbGVjdDInOlxuICAgICAgICAgICAgICBpbnB1dC5vcHRpb25zID0gaW5wdXQub3B0aW9ucy5tYXAoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gaSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5wdXQudmFsdWUgPSBpbnB1dC52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRzO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBzdXBwb3J0ID0gbmV3IFN1cHBvcnQoKTtcbiJdfQ==