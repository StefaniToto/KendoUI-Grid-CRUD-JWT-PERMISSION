/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as _ from 'lodash';
import { FileService } from './test';
import { Component, Input, forwardRef, ElementRef, Renderer, Injector } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { HttpClient } from '@angular/common/http';
import { NgProgress } from '@ngx-progressbar/core';
export class UploadFilesComponent {
    /**
     * @param {?} injector
     * @param {?} api
     * @param {?} element
     * @param {?} renderer
     * @param {?} http
     * @param {?} progress
     */
    constructor(injector, api, element, renderer, http, progress) {
        this.injector = injector;
        this.api = api;
        this.element = element;
        this.renderer = renderer;
        this.http = http;
        this.progress = progress;
        this.inProgress = {
            process: false,
            error: false
        };
        this.number_file_upload_success = 0;
        this.fileList = [];
        this.isload = false;
        this.isShowDetail = false;
        this.imageFormats = ['jpg', 'jpeg', 'png', 'gif', 'djvu', 'raw', 'ico', 'svg', 'tiff', 'bmp'];
        this.documentFormats = ['pdf', 'doc', 'docx', 'xls', 'xlsx', 'txt', 'rtf', 'odt', 'ppt', 'csv'];
        this.videoFormats = ['3gp', 'asf', 'avi', 'mov', 'mp4', 'rm', 'vob', 'wmv'];
        this.soundFormats = ['mp3', 'wma', 'wav', 'flac', 'aac', 'ogg', 'aiff', 'alac'];
        this.preventAbuse = false;
        this.onChange = (/**
         * @param {?} val
         * @return {?}
         */
        (val) => { });
        this.onTouched = (/**
         * @return {?}
         */
        () => { });
        this.disabled = false;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    writeValue(val) {
        if (val) {
            this.value = val;
        }
    }
    /**
     * @return {?}
     */
    get value() {
        return this._value;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set value(val) {
        this._value = val;
        this.onChange(this._value);
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.onChange = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.actionRender();
        }), 1);
    }
    /**
     * @param {?} id
     * @return {?}
     */
    uploadFile(id) {
        this.progressRef = this.progress.ref('progress-bar-' + id);
    }
    /**
     * @return {?}
     */
    ngOnChanges() {
        if (this.isClear === true) {
            setTimeout((/**
             * @return {?}
             */
            () => {
                if (!_.isNil(this.multiple) && this.multiple === true) {
                    this.oldValue = [];
                    this.fileList = [];
                }
                else {
                    this.oldValue = null;
                }
                /** @type {?} */
                const $this = this;
                if (!_.isNil(this.multiple) && this.multiple === true && !_.isEmpty($this.oldValue)) {
                    _.forEach(this.oldValue, (/**
                     * @param {?} value
                     * @return {?}
                     */
                    function (value) {
                        $this.fileList.push(value);
                        $this.value = $this.fileList;
                    }));
                }
                else {
                    $this.value = $this.oldValue;
                }
            }), 1);
        }
    }
    /**
     * @return {?}
     */
    actionRender() {
        // tslint:disable-next-line:prefer-const
        /** @type {?} */
        let $this = this;
        this.isload = true;
        if (!_.isNil(this.multiple) && this.multiple === true && !_.isEmpty($this.oldValue)) {
            _.forEach(this.oldValue, (/**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                $this.fileList.push(value);
                $this.value = $this.fileList;
            }));
        }
        else {
            $this.value = $this.oldValue;
        }
        this.isload = false;
        if (!_.isUndefined(this.accept)) {
            this.valid_extensions = this.accept.split('|');
        }
        $('#uploadfile_v2-reactive-form-' + this.id).click((/**
         * @return {?}
         */
        () => {
            if (this.inProgress[this.subProgress] !== true) {
                // tslint:disable-next-line:prefer-const
                /** @type {?} */
                let input = document.createElement('input');
                input.type = 'file';
                if (!_.isNil(this.multiple) && this.multiple === true) {
                    input.multiple = true;
                }
                $(input).trigger('click');
                $(input).on('change', (/**
                 * @param {?} event
                 * @return {?}
                 */
                event => {
                    this.number_file_upload_success = 0;
                    this.files = input.files;
                    if (this.files.length > 1) {
                        this.response_data = [];
                        _.forEach(this.files, (/**
                         * @param {?} file
                         * @return {?}
                         */
                        function (file) {
                            $this.validateFile(file);
                        }));
                    }
                    if (this.files.length === 1) {
                        this.validateFile(this.files[0]);
                    }
                }));
            }
        }));
    }
    /**
     * @return {?}
     */
    ngOnInit() { }
    /**
     * @param {?} file
     * @return {?}
     */
    getFileExtension(file) {
        return file.name.split('.').pop();
    }
    /**
     * @param {?} file
     * @return {?}
     */
    validateFile(file) {
        if (file !== undefined) {
            if (!_.isNil(this.allowMaxSize) && this.allowMaxSize !== '') {
                if (file.size > parseFloat(this.allowMaxSize) * 1024 * 1024) {
                    this.errorMessage = `Please select file less than ${this.allowMaxSize}MB`;
                    return false;
                }
            }
            // tslint:disable-next-line:max-line-length
            if (!_.isUndefined(this.accept) &&
                _.isUndefined(_.find(this.valid_extensions, (/**
                 * @param {?} item
                 * @return {?}
                 */
                item => item.toLowerCase() === this.getFileExtension(file).toLowerCase())))) {
                this.errorMessage = 'Please select a file with valid type';
                return false;
            }
            this.upload(file);
        }
    }
    /**
     * @param {?} file
     * @return {?}
     */
    upload(file) {
        this.preventAbuse = true;
        this.progressRef.start();
        /** @type {?} */
        const UPLOAD_DIRECTIVE_HEADERS = this.injector.get('UPLOAD_DIRECTIVE_HEADERS');
        /** @type {?} */
        const UPLOAD_DIRECTIVE_API_URL = this.injector.get('UPLOAD_DIRECTIVE_API_URL');
        this.isload = true;
        // tslint:disable-next-line:prefer-const
        /** @type {?} */
        let $this = this;
        this.inProgress[this.subProgress] = true;
        this.inProgress[this.subError] = false;
        // tslint:disable-next-line:prefer-const
        /** @type {?} */
        let params = {
            // files: file
            upload_path: this.uploadPath
        };
        params[this.paramName] = file;
        /** @type {?} */
        const requestHeaders = UPLOAD_DIRECTIVE_HEADERS;
        /** @type {?} */
        const requestApiUrl = UPLOAD_DIRECTIVE_API_URL + this.apiUpload;
        this.api.upload(params, requestApiUrl, requestHeaders).subscribe((/**
         * @param {?} response
         * @return {?}
         */
        response => {
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.progressRef.complete();
                this.inProgress[this.subProgress] = false;
                this.number_file_upload_success++;
                if (!_.isNil($this.multiple) && $this.multiple === true) {
                    $this.fileList.push($this.resultTransformer(response));
                    $this.value = $this.fileList;
                }
                else {
                    $this.value = $this.resultTransformer(response);
                }
                this.isload = false;
                this.errorMessage = null;
                this.preventAbuse = false;
            }), 800);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            this.isload = false;
            this.inProgress[this.subProgress] = false;
            this.inProgress[this.subError] = true;
            console.log('error', error);
            this.errorMessage = error.message;
            this.progressRef.complete();
        }));
    }
    /**
     * @param {?} item
     * @return {?}
     */
    deleteItem(item) {
        this.fileList.splice(this.fileList.indexOf(item), 1);
        this.value = this.fileList;
    }
    /**
     * @param {?} value
     * @param {?} arr
     * @return {?}
     */
    isInclude(value, arr) {
        /** @type {?} */
        const accepts = value.split('|');
        /** @type {?} */
        let result = true;
        _.forEach(accepts, (/**
         * @param {?} i
         * @return {?}
         */
        function (i) {
            if (!_.find(arr, (/**
             * @param {?} item
             * @return {?}
             */
            item => item === i))) {
                result = false;
            }
        }));
        return result;
    }
    /**
     * @param {?} accepts
     * @return {?}
     */
    getIcon(accepts) {
        /** @type {?} */
        const $this = this;
        accepts = accepts.split('|');
        /** @type {?} */
        let result = 'fa-exclamation-triangle';
        _.forEach(accepts, (/**
         * @param {?} i
         * @return {?}
         */
        function (i) {
            if (_.find($this.documentFormats, (/**
             * @param {?} item
             * @return {?}
             */
            item => item === i))) {
                result = 'fa-file-text-o';
            }
            if (_.find($this.videoFormats, (/**
             * @param {?} item
             * @return {?}
             */
            item => item === i))) {
                result = 'fa-file-video-o';
            }
            if (_.find($this.soundFormats, (/**
             * @param {?} item
             * @return {?}
             */
            item => item === i))) {
                result = 'fa-file-audio-o';
            }
        }));
        return result;
    }
}
UploadFilesComponent.decorators = [
    { type: Component, args: [{
                // tslint:disable-next-line:component-selector
                selector: 'upload-file',
                template: "<div class=\"row\" *ngIf=\"isInclude(accept, imageFormats)\">\n  <div class=\"col-md-12 form-wrapper\" style=\"margin-bottom: 15px;\">\n    <div class=\"signle-img zoom-effect-container\" *ngIf=\"!multiple || multiple === false\">\n      <div class=\"rf__ulf_preview_content image-card\">\n        <a *ngIf=\"value\" href=\"{{ value }}\" target=\"_blank\">\n          <img\n            [ngStyle]=\"{\n              'background-image': 'url(' + value + ')',\n              'background-position': 'center',\n              'background-repeat': 'no-repeat',\n              'background-size': 'cover'\n            }\"\n            src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2OTlEMjQ4QkVCQkUxMUU4QkQ2NzlERkVBQ0QwNEU0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2OTlEMjQ4Q0VCQkUxMUU4QkQ2NzlERkVBQ0QwNEU0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjY5OUQyNDg5RUJCRTExRThCRDY3OURGRUFDRDA0RTREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY5OUQyNDhBRUJCRTExRThCRDY3OURGRUFDRDA0RTREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+O7rz2AAAASBJREFUeNrs0jERAAAIxDDAv+fHACNjIqHXTlLwbSTAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsuK0AAwBL0gQp9PLLgwAAAABJRU5ErkJggg==\"\n            width=\"100\"\n            alt=\"\"\n        /></a>\n      </div>\n      <ng-progress color=\"#92c34e\" id=\"progress-bar-{{ id }}\" fixed=\"false\" spinnerPosition=\"left\"></ng-progress>\n      <button\n        (click)=\"uploadFile(id)\"\n        [ngClass]=\"{ waitting: preventAbuse }\"\n        type=\"button\"\n        *ngIf=\"multiple === false || !multiple\"\n        id=\"uploadfile_v2-reactive-form-{{ id }}\"\n        class=\"chip\"\n        [disabled]=\"preventAbuse\"\n      >\n        {{ preventAbuse ? 'Wait...' : 'Upload' }}\n      </button>\n    </div>\n    <div class=\"rf__ulf_content\" *ngIf=\"multiple === true\">\n      <div class=\"mutil-img\">\n        <ng-progress color=\"#92c34e\" id=\"progress-bar-{{ id }}\" fixed=\"false\" spinnerPosition=\"left\"></ng-progress>\n        <div class=\"group-item zoom-effect-container-multi\" *ngFor=\"let item of value\">\n          <div class=\"image-card\">\n            <a href=\"{{ item }}\" target=\"_blank\">\n              <img\n                [ngStyle]=\"{\n                  'background-image': 'url(' + item + ')',\n                  'background-position': 'center',\n                  'background-repeat': 'no-repeat',\n                  'background-size': 'cover'\n                }\"\n                class=\"singleImg\"\n                alt=\"\"\n                src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2OTlEMjQ4QkVCQkUxMUU4QkQ2NzlERkVBQ0QwNEU0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2OTlEMjQ4Q0VCQkUxMUU4QkQ2NzlERkVBQ0QwNEU0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjY5OUQyNDg5RUJCRTExRThCRDY3OURGRUFDRDA0RTREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY5OUQyNDhBRUJCRTExRThCRDY3OURGRUFDRDA0RTREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+O7rz2AAAASBJREFUeNrs0jERAAAIxDDAv+fHACNjIqHXTlLwbSTAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsuK0AAwBL0gQp9PLLgwAAAABJRU5ErkJggg==\"\n              />\n            </a>\n          </div>\n\n          <span (click)=\"deleteItem(item)\">Remove</span>\n        </div>\n      </div>\n      <button\n        (click)=\"uploadFile(id)\"\n        [ngClass]=\"{ waitting: preventAbuse }\"\n        type=\"button\"\n        *ngIf=\"multiple === true\"\n        id=\"uploadfile_v2-reactive-form-{{ id }}\"\n        class=\"chip\"\n        [disabled]=\"preventAbuse\"\n      >\n        {{ preventAbuse ? 'Wait...' : 'Upload' }}\n      </button>\n      <!-- <div class=\"loader-img add-icon\" *ngIf=\"isload\"></div>\n      <div id=\"uploadfile_v2-reactive-form-{{ id }}\" class=\"plus icon add-icon\"></div> -->\n    </div>\n  </div>\n</div>\n\n<div class=\"row\" *ngIf=\"!isInclude(accept, imageFormats)\">\n  <div class=\"col-md-12\" style=\"margin-bottom: 15px;\">\n    <div class=\"rf_uld_preview\" *ngIf=\"!multiple || multiple === false\">\n      <div class=\"form-group\" *ngIf=\"value\">\n        <p><i class=\"fa {{ getIcon(accept) }}\" aria-hidden=\"true\"></i> {{ value }}</p>\n      </div>\n      <ng-progress color=\"#92c34e\" id=\"progress-bar-{{ id }}\" fixed=\"false\" spinnerPosition=\"left\"></ng-progress>\n    </div>\n    <div class=\"mutil-img rf_uld_preview  rf_uld_preview-multil\" *ngIf=\"multiple === true\">\n      <ng-progress color=\"#92c34e\" id=\"progress-bar-{{ id }}\" fixed=\"false\" spinnerPosition=\"left\"></ng-progress>\n      <div class=\"form-group\" *ngFor=\"let item of value\">\n        <p>\n          <i class=\"fa {{ getIcon(accept) }}\" aria-hidden=\"true\"></i> {{ item\n          }}<i (click)=\"deleteItem(item)\" class=\"fa fa-times\" aria-hidden=\"true\"></i>\n        </p>\n      </div>\n    </div>\n    <div class=\"form-group\">\n      <button\n        (click)=\"uploadFile(id)\"\n        [ngClass]=\"{ waitting: preventAbuse }\"\n        type=\"button\"\n        id=\"uploadfile_v2-reactive-form-{{ id }}\"\n        class=\"chip\"\n        [disabled]=\"preventAbuse\"\n      >\n        {{ preventAbuse ? 'Wait...' : 'Upload' }}\n      </button>\n    </div>\n  </div>\n</div>\n\n<div *ngIf=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\n",
                providers: [
                    FileService,
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => UploadFilesComponent)),
                        multi: true
                    }
                ],
                styles: [".form-wrapper{display:flex;align-items:center}img{cursor:pointer}.chip{box-sizing:border-box;margin:15px 0 1em;border-radius:1.5em;padding:.6em 1em;font-size:.8em;width:136px;text-align:center;border:none;background-color:#92c34e;color:#fff;cursor:pointer}ng-progress{position:absolute;top:0;left:0;right:0}.error-message{color:red}.btn-upload-file{position:relative}.btn-upload-file .add-icon{position:absolute;right:-50px;top:0}.fa-times{margin-left:15px;cursor:pointer;color:#cd5c5c}.waitting{background:#ecf0f1}.form-wrapper .signle-img{text-align:center;position:relative;overflow:hidden;width:150px}.form-wrapper .signle-img .rf__ulf_preview_content{width:150xp;min-height:150px;background-color:#ecf0f1}.form-wrapper .signle-img img,.rf__ulf_content{width:100%}.mutil-img .group-item{display:inline-block;position:relative;margin-right:10px;margin-bottom:30px}.mutil-img .group-item span{position:absolute;left:50%;bottom:-25px;margin-left:-25px;cursor:pointer;font-size:14px}.mutil-img .group-item span:hover{text-decoration:underline;color:grey}.form-wrapper .mutil-img{display:flex;flex-wrap:wrap;align-items:center;width:100%;min-height:200px;background-color:#d3d3d3;padding:10px;position:relative;overflow:hidden;transition:.4s}.form-wrapper .mutil-img img{width:100%;border-radius:10px}.image-card img{transition:.4s}.zoom-effect-container-multi:hover .image-card img,.zoom-effect-container:hover .image-card img{-webkit-transform:scale(1.08);transform:scale(1.08)}.zoom-effect-container-multi .image-card img{transition:.4s}.rf_uld_preview{width:100%;min-height:50px;background-color:#ecf0f1;padding:10px;position:relative;overflow:hidden}.rf_uld_preview .fa-file-text-o,.rf_uld_preview .form-group,.rf_uld_preview .form-group p{margin:0}.rf_uld_preview .form-group p{border-radius:10px;padding:5px 10px;background-color:#bdc3c7;font-size:14px}.rf_uld_preview-multil .form-group p{margin-bottom:10px}"]
            }] }
];
/** @nocollapse */
UploadFilesComponent.ctorParameters = () => [
    { type: Injector },
    { type: FileService },
    { type: ElementRef },
    { type: Renderer },
    { type: HttpClient },
    { type: NgProgress }
];
UploadFilesComponent.propDecorators = {
    id: [{ type: Input }],
    headers: [{ type: Input }],
    apiUpload: [{ type: Input }],
    accept: [{ type: Input }],
    subProgress: [{ type: Input }],
    subError: [{ type: Input }],
    allowMaxSize: [{ type: Input }],
    uploadPath: [{ type: Input }],
    multiple: [{ type: Input }],
    _value: [{ type: Input }],
    resultTransformer: [{ type: Input }],
    paramName: [{ type: Input }],
    oldValue: [{ type: Input }],
    isClear: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    UploadFilesComponent.prototype.id;
    /** @type {?} */
    UploadFilesComponent.prototype.headers;
    /** @type {?} */
    UploadFilesComponent.prototype.apiUpload;
    /** @type {?} */
    UploadFilesComponent.prototype.accept;
    /** @type {?} */
    UploadFilesComponent.prototype.subProgress;
    /** @type {?} */
    UploadFilesComponent.prototype.subError;
    /** @type {?} */
    UploadFilesComponent.prototype.allowMaxSize;
    /** @type {?} */
    UploadFilesComponent.prototype.uploadPath;
    /** @type {?} */
    UploadFilesComponent.prototype.multiple;
    /** @type {?} */
    UploadFilesComponent.prototype._value;
    /** @type {?} */
    UploadFilesComponent.prototype.resultTransformer;
    /** @type {?} */
    UploadFilesComponent.prototype.paramName;
    /** @type {?} */
    UploadFilesComponent.prototype.oldValue;
    /** @type {?} */
    UploadFilesComponent.prototype.isClear;
    /** @type {?} */
    UploadFilesComponent.prototype.inProgress;
    /** @type {?} */
    UploadFilesComponent.prototype.files;
    /** @type {?} */
    UploadFilesComponent.prototype.number_file_upload_success;
    /** @type {?} */
    UploadFilesComponent.prototype.response_data;
    /** @type {?} */
    UploadFilesComponent.prototype.valid_extensions;
    /** @type {?} */
    UploadFilesComponent.prototype.fileList;
    /** @type {?} */
    UploadFilesComponent.prototype.isload;
    /** @type {?} */
    UploadFilesComponent.prototype.isShowDetail;
    /** @type {?} */
    UploadFilesComponent.prototype.errorMessage;
    /** @type {?} */
    UploadFilesComponent.prototype.imageFormats;
    /** @type {?} */
    UploadFilesComponent.prototype.documentFormats;
    /** @type {?} */
    UploadFilesComponent.prototype.videoFormats;
    /** @type {?} */
    UploadFilesComponent.prototype.soundFormats;
    /**
     * @type {?}
     * @private
     */
    UploadFilesComponent.prototype.disabled;
    /**
     * @type {?}
     * @private
     */
    UploadFilesComponent.prototype.onChange;
    /**
     * @type {?}
     * @private
     */
    UploadFilesComponent.prototype.onTouched;
    /** @type {?} */
    UploadFilesComponent.prototype.preventAbuse;
    /** @type {?} */
    UploadFilesComponent.prototype.progressRef;
    /**
     * @type {?}
     * @private
     */
    UploadFilesComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    UploadFilesComponent.prototype.api;
    /**
     * @type {?}
     * @private
     */
    UploadFilesComponent.prototype.element;
    /**
     * @type {?}
     * @private
     */
    UploadFilesComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    UploadFilesComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    UploadFilesComponent.prototype.progress;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXBsb2FkLWltYWdlcy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9hbmd1bGFyLXJlYWN0aXZlLWZvcm0vIiwic291cmNlcyI6WyJsaWIvZGlyZWN0aXZlcy91cGxvYWQtZmlsZS91cGxvYWQtaW1hZ2VzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxLQUFLLENBQUMsTUFBTSxRQUFRLENBQUM7QUFDNUIsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUVyQyxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBNEIsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQy9ILE9BQU8sRUFBd0IsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN6RSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDbEQsT0FBTyxFQUFFLFVBQVUsRUFBaUIsTUFBTSx1QkFBdUIsQ0FBQztBQWdCbEUsTUFBTSxPQUFPLG9CQUFvQjs7Ozs7Ozs7O0lBcUMvQixZQUNVLFFBQWtCLEVBQ2xCLEdBQWdCLEVBQ2hCLE9BQW1CLEVBQ25CLFFBQWtCLEVBQ2xCLElBQWdCLEVBQ2hCLFFBQW9CO1FBTHBCLGFBQVEsR0FBUixRQUFRLENBQVU7UUFDbEIsUUFBRyxHQUFILEdBQUcsQ0FBYTtRQUNoQixZQUFPLEdBQVAsT0FBTyxDQUFZO1FBQ25CLGFBQVEsR0FBUixRQUFRLENBQVU7UUFDbEIsU0FBSSxHQUFKLElBQUksQ0FBWTtRQUNoQixhQUFRLEdBQVIsUUFBUSxDQUFZO1FBNUI5QixlQUFVLEdBQVE7WUFDaEIsT0FBTyxFQUFFLEtBQUs7WUFDZCxLQUFLLEVBQUUsS0FBSztTQUNiLENBQUM7UUFFRiwrQkFBMEIsR0FBRyxDQUFDLENBQUM7UUFHL0IsYUFBUSxHQUFHLEVBQUUsQ0FBQztRQUNkLFdBQU0sR0FBRyxLQUFLLENBQUM7UUFDZixpQkFBWSxHQUFHLEtBQUssQ0FBQztRQUVyQixpQkFBWSxHQUFHLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDekYsb0JBQWUsR0FBRyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzNGLGlCQUFZLEdBQUcsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDdkUsaUJBQVksR0FBRyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUszRSxpQkFBWSxHQUFHLEtBQUssQ0FBQztRQVVuQixJQUFJLENBQUMsUUFBUTs7OztRQUFHLENBQUMsR0FBUSxFQUFFLEVBQUUsR0FBRSxDQUFDLENBQUEsQ0FBQztRQUNqQyxJQUFJLENBQUMsU0FBUzs7O1FBQUcsR0FBRyxFQUFFLEdBQUUsQ0FBQyxDQUFBLENBQUM7UUFDMUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7SUFDeEIsQ0FBQzs7Ozs7SUFFRCxVQUFVLENBQUMsR0FBUTtRQUNqQixJQUFJLEdBQUcsRUFBRTtZQUNQLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO1NBQ2xCO0lBQ0gsQ0FBQzs7OztJQUVELElBQUksS0FBSztRQUNQLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDOzs7OztJQUVELElBQUksS0FBSyxDQUFDLEdBQUc7UUFDWCxJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztRQUNsQixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QixDQUFDOzs7OztJQUNELGdCQUFnQixDQUFDLEVBQU87UUFDdEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7SUFDckIsQ0FBQzs7Ozs7SUFFRCxpQkFBaUIsQ0FBQyxFQUFPO1FBQ3ZCLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBQ3RCLENBQUM7Ozs7O0lBRUQsZ0JBQWdCLENBQUMsVUFBbUI7UUFDbEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUM7SUFDN0IsQ0FBQzs7OztJQUVELGVBQWU7UUFDYixVQUFVOzs7UUFBQyxHQUFHLEVBQUU7WUFDZCxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDdEIsQ0FBQyxHQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ1IsQ0FBQzs7Ozs7SUFFRCxVQUFVLENBQUMsRUFBRTtRQUNYLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsZUFBZSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQzdELENBQUM7Ozs7SUFFRCxXQUFXO1FBQ1QsSUFBSSxJQUFJLENBQUMsT0FBTyxLQUFLLElBQUksRUFBRTtZQUN6QixVQUFVOzs7WUFBQyxHQUFHLEVBQUU7Z0JBQ2QsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssSUFBSSxFQUFFO29CQUNyRCxJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztvQkFDbkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7aUJBQ3BCO3FCQUFNO29CQUNMLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO2lCQUN0Qjs7c0JBQ0ssS0FBSyxHQUFHLElBQUk7Z0JBQ2xCLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxLQUFLLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxFQUFFO29CQUNuRixDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFROzs7O29CQUFFLFVBQVMsS0FBSzt3QkFDckMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7d0JBQzNCLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQztvQkFDL0IsQ0FBQyxFQUFDLENBQUM7aUJBQ0o7cUJBQU07b0JBQ0wsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDO2lCQUM5QjtZQUNILENBQUMsR0FBRSxDQUFDLENBQUMsQ0FBQztTQUNQO0lBQ0gsQ0FBQzs7OztJQUVELFlBQVk7OztZQUVOLEtBQUssR0FBRyxJQUFJO1FBQ2hCLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1FBQ25CLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxLQUFLLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQ25GLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVE7Ozs7WUFBRSxVQUFTLEtBQUs7Z0JBQ3JDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUMzQixLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUM7WUFDL0IsQ0FBQyxFQUFDLENBQUM7U0FDSjthQUFNO1lBQ0wsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDO1NBQzlCO1FBQ0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFFcEIsSUFBSSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQy9CLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUNoRDtRQUVELENBQUMsQ0FBQywrQkFBK0IsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSzs7O1FBQUMsR0FBRyxFQUFFO1lBQ3RELElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssSUFBSSxFQUFFOzs7b0JBRTFDLEtBQUssR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQztnQkFDM0MsS0FBSyxDQUFDLElBQUksR0FBRyxNQUFNLENBQUM7Z0JBQ3BCLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxLQUFLLElBQUksRUFBRTtvQkFDckQsS0FBSyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7aUJBQ3ZCO2dCQUNELENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFCLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUTs7OztnQkFBRSxLQUFLLENBQUMsRUFBRTtvQkFDNUIsSUFBSSxDQUFDLDBCQUEwQixHQUFHLENBQUMsQ0FBQztvQkFDcEMsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO29CQUN6QixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTt3QkFDekIsSUFBSSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUM7d0JBQ3hCLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUs7Ozs7d0JBQUUsVUFBUyxJQUFJOzRCQUNqQyxLQUFLLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO3dCQUMzQixDQUFDLEVBQUMsQ0FBQztxQkFDSjtvQkFDRCxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTt3QkFDM0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7cUJBQ2xDO2dCQUNILENBQUMsRUFBQyxDQUFDO2FBQ0o7UUFDSCxDQUFDLEVBQUMsQ0FBQztJQUNMLENBQUM7Ozs7SUFFRCxRQUFRLEtBQUksQ0FBQzs7Ozs7SUFFYixnQkFBZ0IsQ0FBQyxJQUFJO1FBQ25CLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDcEMsQ0FBQzs7Ozs7SUFFRCxZQUFZLENBQUMsSUFBSTtRQUNmLElBQUksSUFBSSxLQUFLLFNBQVMsRUFBRTtZQUN0QixJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksSUFBSSxDQUFDLFlBQVksS0FBSyxFQUFFLEVBQUU7Z0JBQzNELElBQUksSUFBSSxDQUFDLElBQUksR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLElBQUksR0FBRyxJQUFJLEVBQUU7b0JBQzNELElBQUksQ0FBQyxZQUFZLEdBQUcsZ0NBQWdDLElBQUksQ0FBQyxZQUFZLElBQUksQ0FBQztvQkFDMUUsT0FBTyxLQUFLLENBQUM7aUJBQ2Q7YUFDRjtZQUNELDJDQUEyQztZQUMzQyxJQUNFLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO2dCQUMzQixDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQjs7OztnQkFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsS0FBSyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxFQUFFLEVBQUMsQ0FBQyxFQUN0SDtnQkFDQSxJQUFJLENBQUMsWUFBWSxHQUFHLHNDQUFzQyxDQUFDO2dCQUMzRCxPQUFPLEtBQUssQ0FBQzthQUNkO1lBQ0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNuQjtJQUNILENBQUM7Ozs7O0lBRUQsTUFBTSxDQUFDLElBQUk7UUFDVCxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztRQUN6QixJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFDOztjQUNuQix3QkFBd0IsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsQ0FBQzs7Y0FDeEUsd0JBQXdCLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsMEJBQTBCLENBQUM7UUFFOUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7OztZQUVmLEtBQUssR0FBRyxJQUFJO1FBQ2hCLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLElBQUksQ0FBQztRQUN6QyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUM7OztZQUduQyxNQUFNLEdBQUc7O1lBRVgsV0FBVyxFQUFFLElBQUksQ0FBQyxVQUFVO1NBQzdCO1FBQ0QsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUM7O2NBQ3hCLGNBQWMsR0FBRyx3QkFBd0I7O2NBQ3pDLGFBQWEsR0FBRyx3QkFBd0IsR0FBRyxJQUFJLENBQUMsU0FBUztRQUMvRCxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsYUFBYSxFQUFFLGNBQWMsQ0FBQyxDQUFDLFNBQVM7Ozs7UUFDOUQsUUFBUSxDQUFDLEVBQUU7WUFDVCxVQUFVOzs7WUFBQyxHQUFHLEVBQUU7Z0JBQ2QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEVBQUUsQ0FBQztnQkFDNUIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsS0FBSyxDQUFDO2dCQUMxQyxJQUFJLENBQUMsMEJBQTBCLEVBQUUsQ0FBQztnQkFDbEMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssQ0FBQyxRQUFRLEtBQUssSUFBSSxFQUFFO29CQUN2RCxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztvQkFDdkQsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDO2lCQUM5QjtxQkFBTTtvQkFDTCxLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDakQ7Z0JBQ0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7Z0JBQ3BCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO2dCQUN6QixJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztZQUM1QixDQUFDLEdBQUUsR0FBRyxDQUFDLENBQUM7UUFDVixDQUFDOzs7O1FBQ0QsS0FBSyxDQUFDLEVBQUU7WUFDTixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztZQUNwQixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxLQUFLLENBQUM7WUFDMUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsSUFBSSxDQUFDO1lBQ3RDLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQztZQUNsQyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQzlCLENBQUMsRUFDRixDQUFDO0lBQ0osQ0FBQzs7Ozs7SUFFRCxVQUFVLENBQUMsSUFBSTtRQUNiLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUM3QixDQUFDOzs7Ozs7SUFFRCxTQUFTLENBQUMsS0FBSyxFQUFFLEdBQUc7O2NBQ1osT0FBTyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDOztZQUM1QixNQUFNLEdBQUcsSUFBSTtRQUNqQixDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU87Ozs7UUFBRSxVQUFTLENBQUM7WUFDM0IsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRzs7OztZQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBQyxFQUFFO2dCQUNwQyxNQUFNLEdBQUcsS0FBSyxDQUFDO2FBQ2hCO1FBQ0gsQ0FBQyxFQUFDLENBQUM7UUFDSCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOzs7OztJQUVELE9BQU8sQ0FBQyxPQUFPOztjQUNQLEtBQUssR0FBRyxJQUFJO1FBQ2xCLE9BQU8sR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDOztZQUN6QixNQUFNLEdBQUcseUJBQXlCO1FBQ3RDLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTzs7OztRQUFFLFVBQVMsQ0FBQztZQUMzQixJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWU7Ozs7WUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksS0FBSyxDQUFDLEVBQUMsRUFBRTtnQkFDckQsTUFBTSxHQUFHLGdCQUFnQixDQUFDO2FBQzNCO1lBQ0QsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZOzs7O1lBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUFDLEVBQUU7Z0JBQ2xELE1BQU0sR0FBRyxpQkFBaUIsQ0FBQzthQUM1QjtZQUNELElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWTs7OztZQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBQyxFQUFFO2dCQUNsRCxNQUFNLEdBQUcsaUJBQWlCLENBQUM7YUFDNUI7UUFDSCxDQUFDLEVBQUMsQ0FBQztRQUNILE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7OztZQWhSRixTQUFTLFNBQUM7O2dCQUVULFFBQVEsRUFBRSxhQUFhO2dCQUN2Qixrdk9BQTZDO2dCQUU3QyxTQUFTLEVBQUU7b0JBQ1QsV0FBVztvQkFDWDt3QkFDRSxPQUFPLEVBQUUsaUJBQWlCO3dCQUMxQixXQUFXLEVBQUUsVUFBVTs7O3dCQUFDLEdBQUcsRUFBRSxDQUFDLG9CQUFvQixFQUFDO3dCQUNuRCxLQUFLLEVBQUUsSUFBSTtxQkFDWjtpQkFDRjs7YUFDRjs7OztZQWxCOEYsUUFBUTtZQUY5RixXQUFXO1lBRTJCLFVBQVU7WUFBRSxRQUFRO1lBRTFELFVBQVU7WUFDVixVQUFVOzs7aUJBaUJoQixLQUFLO3NCQUNMLEtBQUs7d0JBQ0wsS0FBSztxQkFDTCxLQUFLOzBCQUNMLEtBQUs7dUJBQ0wsS0FBSzsyQkFDTCxLQUFLO3lCQUNMLEtBQUs7dUJBQ0wsS0FBSztxQkFDTCxLQUFLO2dDQUNMLEtBQUs7d0JBQ0wsS0FBSzt1QkFDTCxLQUFLO3NCQUNMLEtBQUs7Ozs7SUFiTixrQ0FBb0I7O0lBQ3BCLHVDQUF5Qjs7SUFDekIseUNBQTJCOztJQUMzQixzQ0FBd0I7O0lBQ3hCLDJDQUEwQjs7SUFDMUIsd0NBQXVCOztJQUN2Qiw0Q0FBMkI7O0lBQzNCLDBDQUF5Qjs7SUFDekIsd0NBQTJCOztJQUMzQixzQ0FBZ0I7O0lBQ2hCLGlEQUEyQjs7SUFDM0IseUNBQW1COztJQUNuQix3Q0FBa0I7O0lBQ2xCLHVDQUEwQjs7SUFDMUIsMENBR0U7O0lBQ0YscUNBQU07O0lBQ04sMERBQStCOztJQUMvQiw2Q0FBYzs7SUFDZCxnREFBaUI7O0lBQ2pCLHdDQUFjOztJQUNkLHNDQUFlOztJQUNmLDRDQUFxQjs7SUFDckIsNENBQWE7O0lBQ2IsNENBQXlGOztJQUN6RiwrQ0FBMkY7O0lBQzNGLDRDQUF1RTs7SUFDdkUsNENBQTJFOzs7OztJQUMzRSx3Q0FBMEI7Ozs7O0lBQzFCLHdDQUEyQjs7Ozs7SUFDM0IseUNBQTRCOztJQUU1Qiw0Q0FBcUI7O0lBQ3JCLDJDQUEyQjs7Ozs7SUFFekIsd0NBQTBCOzs7OztJQUMxQixtQ0FBd0I7Ozs7O0lBQ3hCLHVDQUEyQjs7Ozs7SUFDM0Isd0NBQTBCOzs7OztJQUMxQixvQ0FBd0I7Ozs7O0lBQ3hCLHdDQUE0QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IEZpbGVTZXJ2aWNlIH0gZnJvbSAnLi90ZXN0JztcbmRlY2xhcmUgY29uc3QgJDogYW55O1xuaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBmb3J3YXJkUmVmLCBFbGVtZW50UmVmLCBSZW5kZXJlciwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzLCBJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IE5nUHJvZ3Jlc3MsIE5nUHJvZ3Jlc3NSZWYgfSBmcm9tICdAbmd4LXByb2dyZXNzYmFyL2NvcmUnO1xuXG5AQ29tcG9uZW50KHtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmNvbXBvbmVudC1zZWxlY3RvclxuICBzZWxlY3RvcjogJ3VwbG9hZC1maWxlJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3VwbG9hZC1pbWFnZXMuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi91cGxvYWQtaW1hZ2VzLmNvbXBvbmVudC5jc3MnXSxcbiAgcHJvdmlkZXJzOiBbXG4gICAgRmlsZVNlcnZpY2UsXG4gICAge1xuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBVcGxvYWRGaWxlc0NvbXBvbmVudCksXG4gICAgICBtdWx0aTogdHJ1ZVxuICAgIH1cbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBVcGxvYWRGaWxlc0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQ29udHJvbFZhbHVlQWNjZXNzb3IsIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcyB7XG4gIEBJbnB1dCgpIGlkOiBudW1iZXI7XG4gIEBJbnB1dCgpIGhlYWRlcnM6IHN0cmluZztcbiAgQElucHV0KCkgYXBpVXBsb2FkOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGFjY2VwdDogc3RyaW5nO1xuICBASW5wdXQoKSBzdWJQcm9ncmVzczogYW55O1xuICBASW5wdXQoKSBzdWJFcnJvcjogYW55O1xuICBASW5wdXQoKSBhbGxvd01heFNpemU6IGFueTtcbiAgQElucHV0KCkgdXBsb2FkUGF0aDogYW55O1xuICBASW5wdXQoKSBtdWx0aXBsZTogQm9vbGVhbjtcbiAgQElucHV0KCkgX3ZhbHVlO1xuICBASW5wdXQoKSByZXN1bHRUcmFuc2Zvcm1lcjtcbiAgQElucHV0KCkgcGFyYW1OYW1lO1xuICBASW5wdXQoKSBvbGRWYWx1ZTtcbiAgQElucHV0KCkgaXNDbGVhcjogQm9vbGVhbjtcbiAgaW5Qcm9ncmVzczogYW55ID0ge1xuICAgIHByb2Nlc3M6IGZhbHNlLFxuICAgIGVycm9yOiBmYWxzZVxuICB9O1xuICBmaWxlcztcbiAgbnVtYmVyX2ZpbGVfdXBsb2FkX3N1Y2Nlc3MgPSAwO1xuICByZXNwb25zZV9kYXRhO1xuICB2YWxpZF9leHRlbnNpb25zO1xuICBmaWxlTGlzdCA9IFtdO1xuICBpc2xvYWQgPSBmYWxzZTtcbiAgaXNTaG93RGV0YWlsID0gZmFsc2U7XG4gIGVycm9yTWVzc2FnZTtcbiAgaW1hZ2VGb3JtYXRzID0gWydqcGcnLCAnanBlZycsICdwbmcnLCAnZ2lmJywgJ2RqdnUnLCAncmF3JywgJ2ljbycsICdzdmcnLCAndGlmZicsICdibXAnXTtcbiAgZG9jdW1lbnRGb3JtYXRzID0gWydwZGYnLCAnZG9jJywgJ2RvY3gnLCAneGxzJywgJ3hsc3gnLCAndHh0JywgJ3J0ZicsICdvZHQnLCAncHB0JywgJ2NzdiddO1xuICB2aWRlb0Zvcm1hdHMgPSBbJzNncCcsICdhc2YnLCAnYXZpJywgJ21vdicsICdtcDQnLCAncm0nLCAndm9iJywgJ3dtdiddO1xuICBzb3VuZEZvcm1hdHMgPSBbJ21wMycsICd3bWEnLCAnd2F2JywgJ2ZsYWMnLCAnYWFjJywgJ29nZycsICdhaWZmJywgJ2FsYWMnXTtcbiAgcHJpdmF0ZSBkaXNhYmxlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBvbkNoYW5nZTogRnVuY3Rpb247XG4gIHByaXZhdGUgb25Ub3VjaGVkOiBGdW5jdGlvbjtcblxuICBwcmV2ZW50QWJ1c2UgPSBmYWxzZTtcbiAgcHJvZ3Jlc3NSZWY6IE5nUHJvZ3Jlc3NSZWY7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxuICAgIHByaXZhdGUgYXBpOiBGaWxlU2VydmljZSxcbiAgICBwcml2YXRlIGVsZW1lbnQ6IEVsZW1lbnRSZWYsXG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIsXG4gICAgcHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50LFxuICAgIHByaXZhdGUgcHJvZ3Jlc3M6IE5nUHJvZ3Jlc3NcbiAgKSB7XG4gICAgdGhpcy5vbkNoYW5nZSA9ICh2YWw6IGFueSkgPT4ge307XG4gICAgdGhpcy5vblRvdWNoZWQgPSAoKSA9PiB7fTtcbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICB3cml0ZVZhbHVlKHZhbDogYW55KTogdm9pZCB7XG4gICAgaWYgKHZhbCkge1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbDtcbiAgICB9XG4gIH1cblxuICBnZXQgdmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG5cbiAgc2V0IHZhbHVlKHZhbCkge1xuICAgIHRoaXMuX3ZhbHVlID0gdmFsO1xuICAgIHRoaXMub25DaGFuZ2UodGhpcy5fdmFsdWUpO1xuICB9XG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSk6IHZvaWQge1xuICAgIHRoaXMub25DaGFuZ2UgPSBmbjtcbiAgfVxuXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xuICB9XG5cbiAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmFjdGlvblJlbmRlcigpO1xuICAgIH0sIDEpO1xuICB9XG5cbiAgdXBsb2FkRmlsZShpZCkge1xuICAgIHRoaXMucHJvZ3Jlc3NSZWYgPSB0aGlzLnByb2dyZXNzLnJlZigncHJvZ3Jlc3MtYmFyLScgKyBpZCk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcygpIHtcbiAgICBpZiAodGhpcy5pc0NsZWFyID09PSB0cnVlKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKCFfLmlzTmlsKHRoaXMubXVsdGlwbGUpICYmIHRoaXMubXVsdGlwbGUgPT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLm9sZFZhbHVlID0gW107XG4gICAgICAgICAgdGhpcy5maWxlTGlzdCA9IFtdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMub2xkVmFsdWUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0ICR0aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCFfLmlzTmlsKHRoaXMubXVsdGlwbGUpICYmIHRoaXMubXVsdGlwbGUgPT09IHRydWUgJiYgIV8uaXNFbXB0eSgkdGhpcy5vbGRWYWx1ZSkpIHtcbiAgICAgICAgICBfLmZvckVhY2godGhpcy5vbGRWYWx1ZSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICR0aGlzLmZpbGVMaXN0LnB1c2godmFsdWUpO1xuICAgICAgICAgICAgJHRoaXMudmFsdWUgPSAkdGhpcy5maWxlTGlzdDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkdGhpcy52YWx1ZSA9ICR0aGlzLm9sZFZhbHVlO1xuICAgICAgICB9XG4gICAgICB9LCAxKTtcbiAgICB9XG4gIH1cblxuICBhY3Rpb25SZW5kZXIoKSB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci1jb25zdFxuICAgIGxldCAkdGhpcyA9IHRoaXM7XG4gICAgdGhpcy5pc2xvYWQgPSB0cnVlO1xuICAgIGlmICghXy5pc05pbCh0aGlzLm11bHRpcGxlKSAmJiB0aGlzLm11bHRpcGxlID09PSB0cnVlICYmICFfLmlzRW1wdHkoJHRoaXMub2xkVmFsdWUpKSB7XG4gICAgICBfLmZvckVhY2godGhpcy5vbGRWYWx1ZSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgJHRoaXMuZmlsZUxpc3QucHVzaCh2YWx1ZSk7XG4gICAgICAgICR0aGlzLnZhbHVlID0gJHRoaXMuZmlsZUxpc3Q7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRoaXMudmFsdWUgPSAkdGhpcy5vbGRWYWx1ZTtcbiAgICB9XG4gICAgdGhpcy5pc2xvYWQgPSBmYWxzZTtcblxuICAgIGlmICghXy5pc1VuZGVmaW5lZCh0aGlzLmFjY2VwdCkpIHtcbiAgICAgIHRoaXMudmFsaWRfZXh0ZW5zaW9ucyA9IHRoaXMuYWNjZXB0LnNwbGl0KCd8Jyk7XG4gICAgfVxuXG4gICAgJCgnI3VwbG9hZGZpbGVfdjItcmVhY3RpdmUtZm9ybS0nICsgdGhpcy5pZCkuY2xpY2soKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuaW5Qcm9ncmVzc1t0aGlzLnN1YlByb2dyZXNzXSAhPT0gdHJ1ZSkge1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWNvbnN0XG4gICAgICAgIGxldCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGlucHV0LnR5cGUgPSAnZmlsZSc7XG4gICAgICAgIGlmICghXy5pc05pbCh0aGlzLm11bHRpcGxlKSAmJiB0aGlzLm11bHRpcGxlID09PSB0cnVlKSB7XG4gICAgICAgICAgaW5wdXQubXVsdGlwbGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgICQoaW5wdXQpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICQoaW5wdXQpLm9uKCdjaGFuZ2UnLCBldmVudCA9PiB7XG4gICAgICAgICAgdGhpcy5udW1iZXJfZmlsZV91cGxvYWRfc3VjY2VzcyA9IDA7XG4gICAgICAgICAgdGhpcy5maWxlcyA9IGlucHV0LmZpbGVzO1xuICAgICAgICAgIGlmICh0aGlzLmZpbGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VfZGF0YSA9IFtdO1xuICAgICAgICAgICAgXy5mb3JFYWNoKHRoaXMuZmlsZXMsIGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgJHRoaXMudmFsaWRhdGVGaWxlKGZpbGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLmZpbGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUZpbGUodGhpcy5maWxlc1swXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge31cblxuICBnZXRGaWxlRXh0ZW5zaW9uKGZpbGUpIHtcbiAgICByZXR1cm4gZmlsZS5uYW1lLnNwbGl0KCcuJykucG9wKCk7XG4gIH1cblxuICB2YWxpZGF0ZUZpbGUoZmlsZSkge1xuICAgIGlmIChmaWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghXy5pc05pbCh0aGlzLmFsbG93TWF4U2l6ZSkgJiYgdGhpcy5hbGxvd01heFNpemUgIT09ICcnKSB7XG4gICAgICAgIGlmIChmaWxlLnNpemUgPiBwYXJzZUZsb2F0KHRoaXMuYWxsb3dNYXhTaXplKSAqIDEwMjQgKiAxMDI0KSB7XG4gICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBgUGxlYXNlIHNlbGVjdCBmaWxlIGxlc3MgdGhhbiAke3RoaXMuYWxsb3dNYXhTaXplfU1CYDtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcbiAgICAgIGlmIChcbiAgICAgICAgIV8uaXNVbmRlZmluZWQodGhpcy5hY2NlcHQpICYmXG4gICAgICAgIF8uaXNVbmRlZmluZWQoXy5maW5kKHRoaXMudmFsaWRfZXh0ZW5zaW9ucywgaXRlbSA9PiBpdGVtLnRvTG93ZXJDYXNlKCkgPT09IHRoaXMuZ2V0RmlsZUV4dGVuc2lvbihmaWxlKS50b0xvd2VyQ2FzZSgpKSlcbiAgICAgICkge1xuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICdQbGVhc2Ugc2VsZWN0IGEgZmlsZSB3aXRoIHZhbGlkIHR5cGUnO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB0aGlzLnVwbG9hZChmaWxlKTtcbiAgICB9XG4gIH1cblxuICB1cGxvYWQoZmlsZSkge1xuICAgIHRoaXMucHJldmVudEFidXNlID0gdHJ1ZTtcbiAgICB0aGlzLnByb2dyZXNzUmVmLnN0YXJ0KCk7XG4gICAgY29uc3QgVVBMT0FEX0RJUkVDVElWRV9IRUFERVJTID0gdGhpcy5pbmplY3Rvci5nZXQoJ1VQTE9BRF9ESVJFQ1RJVkVfSEVBREVSUycpO1xuICAgIGNvbnN0IFVQTE9BRF9ESVJFQ1RJVkVfQVBJX1VSTCA9IHRoaXMuaW5qZWN0b3IuZ2V0KCdVUExPQURfRElSRUNUSVZFX0FQSV9VUkwnKTtcblxuICAgIHRoaXMuaXNsb2FkID0gdHJ1ZTtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWNvbnN0XG4gICAgbGV0ICR0aGlzID0gdGhpcztcbiAgICB0aGlzLmluUHJvZ3Jlc3NbdGhpcy5zdWJQcm9ncmVzc10gPSB0cnVlO1xuICAgIHRoaXMuaW5Qcm9ncmVzc1t0aGlzLnN1YkVycm9yXSA9IGZhbHNlO1xuXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci1jb25zdFxuICAgIGxldCBwYXJhbXMgPSB7XG4gICAgICAvLyBmaWxlczogZmlsZVxuICAgICAgdXBsb2FkX3BhdGg6IHRoaXMudXBsb2FkUGF0aFxuICAgIH07XG4gICAgcGFyYW1zW3RoaXMucGFyYW1OYW1lXSA9IGZpbGU7XG4gICAgY29uc3QgcmVxdWVzdEhlYWRlcnMgPSBVUExPQURfRElSRUNUSVZFX0hFQURFUlM7XG4gICAgY29uc3QgcmVxdWVzdEFwaVVybCA9IFVQTE9BRF9ESVJFQ1RJVkVfQVBJX1VSTCArIHRoaXMuYXBpVXBsb2FkO1xuICAgIHRoaXMuYXBpLnVwbG9hZChwYXJhbXMsIHJlcXVlc3RBcGlVcmwsIHJlcXVlc3RIZWFkZXJzKS5zdWJzY3JpYmUoXG4gICAgICByZXNwb25zZSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMucHJvZ3Jlc3NSZWYuY29tcGxldGUoKTtcbiAgICAgICAgICB0aGlzLmluUHJvZ3Jlc3NbdGhpcy5zdWJQcm9ncmVzc10gPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLm51bWJlcl9maWxlX3VwbG9hZF9zdWNjZXNzKys7XG4gICAgICAgICAgaWYgKCFfLmlzTmlsKCR0aGlzLm11bHRpcGxlKSAmJiAkdGhpcy5tdWx0aXBsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgJHRoaXMuZmlsZUxpc3QucHVzaCgkdGhpcy5yZXN1bHRUcmFuc2Zvcm1lcihyZXNwb25zZSkpO1xuICAgICAgICAgICAgJHRoaXMudmFsdWUgPSAkdGhpcy5maWxlTGlzdDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHRoaXMudmFsdWUgPSAkdGhpcy5yZXN1bHRUcmFuc2Zvcm1lcihyZXNwb25zZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuaXNsb2FkID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAgIHRoaXMucHJldmVudEFidXNlID0gZmFsc2U7XG4gICAgICAgIH0sIDgwMCk7XG4gICAgICB9LFxuICAgICAgZXJyb3IgPT4ge1xuICAgICAgICB0aGlzLmlzbG9hZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmluUHJvZ3Jlc3NbdGhpcy5zdWJQcm9ncmVzc10gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pblByb2dyZXNzW3RoaXMuc3ViRXJyb3JdID0gdHJ1ZTtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NSZWYuY29tcGxldGUoKTtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgZGVsZXRlSXRlbShpdGVtKSB7XG4gICAgdGhpcy5maWxlTGlzdC5zcGxpY2UodGhpcy5maWxlTGlzdC5pbmRleE9mKGl0ZW0pLCAxKTtcbiAgICB0aGlzLnZhbHVlID0gdGhpcy5maWxlTGlzdDtcbiAgfVxuXG4gIGlzSW5jbHVkZSh2YWx1ZSwgYXJyKSB7XG4gICAgY29uc3QgYWNjZXB0cyA9IHZhbHVlLnNwbGl0KCd8Jyk7XG4gICAgbGV0IHJlc3VsdCA9IHRydWU7XG4gICAgXy5mb3JFYWNoKGFjY2VwdHMsIGZ1bmN0aW9uKGkpIHtcbiAgICAgIGlmICghXy5maW5kKGFyciwgaXRlbSA9PiBpdGVtID09PSBpKSkge1xuICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZ2V0SWNvbihhY2NlcHRzKSB7XG4gICAgY29uc3QgJHRoaXMgPSB0aGlzO1xuICAgIGFjY2VwdHMgPSBhY2NlcHRzLnNwbGl0KCd8Jyk7XG4gICAgbGV0IHJlc3VsdCA9ICdmYS1leGNsYW1hdGlvbi10cmlhbmdsZSc7XG4gICAgXy5mb3JFYWNoKGFjY2VwdHMsIGZ1bmN0aW9uKGkpIHtcbiAgICAgIGlmIChfLmZpbmQoJHRoaXMuZG9jdW1lbnRGb3JtYXRzLCBpdGVtID0+IGl0ZW0gPT09IGkpKSB7XG4gICAgICAgIHJlc3VsdCA9ICdmYS1maWxlLXRleHQtbyc7XG4gICAgICB9XG4gICAgICBpZiAoXy5maW5kKCR0aGlzLnZpZGVvRm9ybWF0cywgaXRlbSA9PiBpdGVtID09PSBpKSkge1xuICAgICAgICByZXN1bHQgPSAnZmEtZmlsZS12aWRlby1vJztcbiAgICAgIH1cbiAgICAgIGlmIChfLmZpbmQoJHRoaXMuc291bmRGb3JtYXRzLCBpdGVtID0+IGl0ZW0gPT09IGkpKSB7XG4gICAgICAgIHJlc3VsdCA9ICdmYS1maWxlLWF1ZGlvLW8nO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cbiJdfQ==