/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, forwardRef, ElementRef, Renderer } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import * as _ from 'lodash';
export class SingleSelect2Component {
    /**
     * @param {?} element
     * @param {?} renderer
     */
    constructor(element, renderer) {
        this.element = element;
        this.renderer = renderer;
        this.defaultValue = null;
        this.onChange = (/**
         * @param {?} val
         * @return {?}
         */
        (val) => { });
        this.onTouched = (/**
         * @return {?}
         */
        () => { });
        this.disabled = false;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    writeValue(val) {
        if (val) {
            this.value = val;
        }
    }
    /**
     * @return {?}
     */
    get value() {
        return this._value;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set value(val) {
        this._value = val;
        this.onChange(this._value);
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.onChange = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.defaultValue = this.value;
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.actionRender();
        }), 1);
    }
    /**
     * @return {?}
     */
    ngOnChanges() {
        if (this.isClear === true) {
            this.defaultValue = undefined;
            setTimeout((/**
             * @return {?}
             */
            () => {
                $('#single-select2-reactive-form-' + this.id)
                    .select2()
                    .select2('val', 'ok');
            }), 1);
        }
    }
    /**
     * @param {?} data
     * @return {?}
     */
    formatValues(data) {
        return data;
    }
    /**
     * @return {?}
     */
    actionRender() {
        // tslint:disable-next-line:prefer-const
        /** @type {?} */
        let $this = this;
        // tslint:disable-next-line:prefer-const
        /** @type {?} */
        let options = {
            formatResult: this.formatValues,
            formatSelection: this.formatValues
        };
        if (this.placeholder !== undefined && this.placeholder != null) {
            options.placeholder = this.placeholder;
        }
        if (this.isDisabled !== undefined && this.isDisabled != null && this.isDisabled === true) {
            options.disabled = true;
        }
        $('#single-select2-reactive-form-' + this.id).select2(options);
        if (_.isUndefined(this.defaultValue)) {
            /** @type {?} */
            const a = $('#single-select2-reactive-form-' + this.id)
                .select2()
                .select2('val');
            this.value = _.find($this.options, (/**
             * @param {?} o
             * @return {?}
             */
            function (o) {
                return o.value === +a;
            }));
        }
        if (!_.isUndefined(this.defaultValue)) {
            $('#single-select2-reactive-form-' + this.id)
                .select2()
                .val(this.value.value)
                .trigger('change');
        }
        $('#single-select2-reactive-form-' + this.id).change((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            const value = $(this).val();
            $this.value = _.find($this.options, (/**
             * @param {?} o
             * @return {?}
             */
            function (o) {
                return o.value === value;
            }));
        }));
    }
}
SingleSelect2Component.decorators = [
    { type: Component, args: [{
                // tslint:disable-next-line:component-selector
                selector: 'single-select2',
                template: "<select id=\"single-select2-reactive-form-{{ id }}\" class=\"form-control\" select2>\n  <option *ngFor=\"let opt of options\" value=\"{{ opt.value }}\" selected=\"{{ opt.selected }}\">{{ opt.label }}</option>\n</select>\n",
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => SingleSelect2Component)),
                        multi: true
                    }
                ],
                styles: [""]
            }] }
];
/** @nocollapse */
SingleSelect2Component.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer }
];
SingleSelect2Component.propDecorators = {
    placeholder: [{ type: Input }],
    options: [{ type: Input }],
    id: [{ type: Input }],
    _value: [{ type: Input }],
    isClear: [{ type: Input }],
    isDisabled: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    SingleSelect2Component.prototype.placeholder;
    /** @type {?} */
    SingleSelect2Component.prototype.options;
    /** @type {?} */
    SingleSelect2Component.prototype.id;
    /** @type {?} */
    SingleSelect2Component.prototype._value;
    /** @type {?} */
    SingleSelect2Component.prototype.isClear;
    /** @type {?} */
    SingleSelect2Component.prototype.isDisabled;
    /** @type {?} */
    SingleSelect2Component.prototype.defaultValue;
    /**
     * @type {?}
     * @private
     */
    SingleSelect2Component.prototype.disabled;
    /**
     * @type {?}
     * @private
     */
    SingleSelect2Component.prototype.onChange;
    /**
     * @type {?}
     * @private
     */
    SingleSelect2Component.prototype.onTouched;
    /**
     * @type {?}
     * @private
     */
    SingleSelect2Component.prototype.element;
    /**
     * @type {?}
     * @private
     */
    SingleSelect2Component.prototype.renderer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2luZ2xlLXNlbGVjdDIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW5ndWxhci1yZWFjdGl2ZS1mb3JtLyIsInNvdXJjZXMiOlsibGliL2RpcmVjdGl2ZXMvc2luZ2xlLXNlbGVjdDIvc2luZ2xlLXNlbGVjdDIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBNEIsTUFBTSxlQUFlLENBQUM7QUFDN0csT0FBTyxFQUF3QixpQkFBaUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3pFLE9BQU8sS0FBSyxDQUFDLE1BQU0sUUFBUSxDQUFDO0FBZ0I1QixNQUFNLE9BQU8sc0JBQXNCOzs7OztJQW1CakMsWUFBb0IsT0FBbUIsRUFBVSxRQUFrQjtRQUEvQyxZQUFPLEdBQVAsT0FBTyxDQUFZO1FBQVUsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQU5uRSxpQkFBWSxHQUFHLElBQUksQ0FBQztRQU9sQixJQUFJLENBQUMsUUFBUTs7OztRQUFHLENBQUMsR0FBUSxFQUFFLEVBQUUsR0FBRSxDQUFDLENBQUEsQ0FBQztRQUNqQyxJQUFJLENBQUMsU0FBUzs7O1FBQUcsR0FBRyxFQUFFLEdBQUUsQ0FBQyxDQUFBLENBQUM7UUFDMUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7SUFDeEIsQ0FBQzs7Ozs7SUFDRCxVQUFVLENBQUMsR0FBUTtRQUNqQixJQUFJLEdBQUcsRUFBRTtZQUNQLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO1NBQ2xCO0lBQ0gsQ0FBQzs7OztJQUVELElBQUksS0FBSztRQUNQLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDOzs7OztJQUVELElBQUksS0FBSyxDQUFDLEdBQUc7UUFDWCxJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztRQUNsQixJQUFJLENBQUMs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QUFLLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRTtZQUMzQixLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU87Ozs7WUFBRSxVQUFTLENBQUM7Z0JBQzVDLE9BQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUM7WUFDM0IsQ0FBQyxFQUFDLENBQUM7UUFDTCxDQUFDLEVBQUMsQ0FBQztJQUNMLENBQUM7OztZQXpIRixTQUFTLFNBQUM7O2dCQUVULFFBQVEsRUFBRSxnQkFBZ0I7Z0JBQzFCLHlPQUE4QztnQkFFOUMsU0FBUyxFQUFFO29CQUNUO3dCQUNFLE9BQU8sRUFBRSxpQkFBaUI7d0JBQzFCLFdBQVcsRUFBRSxVQUFVOzs7d0JBQUMsR0FBRyxFQUFFLENBQUMsc0JBQXNCLEVBQUM7d0JBQ3JELEtBQUssRUFBRSxJQUFJO3FCQUNaO2lCQUNGOzthQUNGOzs7O1lBakJzQyxVQUFVO1lBQUUsUUFBUTs7OzBCQW1CeEQsS0FBSztzQkFFTCxLQUFLO2lCQUVMLEtBQUs7cUJBRUwsS0FBSztzQkFFTCxLQUFLO3lCQUVMLEtBQUs7Ozs7SUFWTiw2Q0FDb0I7O0lBQ3BCLHlDQUNhOztJQUNiLG9DQUNXOztJQUNYLHdDQUNZOztJQUNaLHlDQUNpQjs7SUFDakIsNENBQTZCOztJQUU3Qiw4Q0FBb0I7Ozs7O0lBRXBCLDBDQUEwQjs7Ozs7SUFDMUIsMENBQTJCOzs7OztJQUMzQiwyQ0FBNEI7Ozs7O0lBRWhCLHlDQUEyQjs7Ozs7SUFBRSwwQ0FBMEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBmb3J3YXJkUmVmLCBFbGVtZW50UmVmLCBSZW5kZXJlciwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XG5kZWNsYXJlIGNvbnN0ICQ6IGFueTtcblxuQENvbXBvbmVudCh7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjb21wb25lbnQtc2VsZWN0b3JcbiAgc2VsZWN0b3I6ICdzaW5nbGUtc2VsZWN0MicsXG4gIHRlbXBsYXRlVXJsOiAnLi9zaW5nbGUtc2VsZWN0Mi5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3NpbmdsZS1zZWxlY3QyLmNvbXBvbmVudC5jc3MnXSxcbiAgcHJvdmlkZXJzOiBbXG4gICAge1xuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBTaW5nbGVTZWxlY3QyQ29tcG9uZW50KSxcbiAgICAgIG11bHRpOiB0cnVlXG4gICAgfVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIFNpbmdsZVNlbGVjdDJDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBDb250cm9sVmFsdWVBY2Nlc3NvciwgT25DaGFuZ2VzIHtcbiAgQElucHV0KClcbiAgcGxhY2Vob2xkZXI6IHN0cmluZztcbiAgQElucHV0KClcbiAgb3B0aW9uczogYW55O1xuICBASW5wdXQoKVxuICBpZDogbnVtYmVyO1xuICBASW5wdXQoKVxuICBfdmFsdWU6IGFueTtcbiAgQElucHV0KClcbiAgaXNDbGVhcjogQm9vbGVhbjtcbiAgQElucHV0KCkgaXNEaXNhYmxlZDogQm9vbGVhbjtcblxuICBkZWZhdWx0VmFsdWUgPSBudWxsO1xuXG4gIHByaXZhdGUgZGlzYWJsZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgb25DaGFuZ2U6IEZ1bmN0aW9uO1xuICBwcml2YXRlIG9uVG91Y2hlZDogRnVuY3Rpb247XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtZW50OiBFbGVtZW50UmVmLCBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcikge1xuICAgIHRoaXMub25DaGFuZ2UgPSAodmFsOiBhbnkpID0+IHt9O1xuICAgIHRoaXMub25Ub3VjaGVkID0gKCkgPT4ge307XG4gICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG4gIHdyaXRlVmFsdWUodmFsOiBhbnkpOiB2b2lkIHtcbiAgICBpZiAodmFsKSB7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsO1xuICAgIH1cbiAgfVxuXG4gIGdldCB2YWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH1cblxuICBzZXQgdmFsdWUodmFsKSB7XG4gICAgdGhpcy5fdmFsdWUgPSB2YWw7XG4gICAgdGhpcy5vbkNoYW5nZSh0aGlzLl92YWx1ZSk7XG4gIH1cbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XG4gICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xuICB9XG5cbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46IGFueSk6IHZvaWQge1xuICAgIHRoaXMub25Ub3VjaGVkID0gZm47XG4gIH1cblxuICBzZXREaXNhYmxlZFN0YXRlKGlzRGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmFjdGlvblJlbmRlcigpO1xuICAgIH0sIDEpO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoKSB7XG4gICAgaWYgKHRoaXMuaXNDbGVhciA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5kZWZhdWx0VmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgJCgnI3NpbmdsZS1zZWxlY3QyLXJlYWN0aXZlLWZvcm0tJyArIHRoaXMuaWQpXG4gICAgICAgICAgLnNlbGVjdDIoKVxuICAgICAgICAgIC5zZWxlY3QyKCd2YWwnLCAnb2snKTtcbiAgICAgIH0sIDEpO1xuICAgIH1cbiAgfVxuICBmb3JtYXRWYWx1ZXMoZGF0YSkge1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgYWN0aW9uUmVuZGVyKCkge1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItY29uc3RcbiAgICBsZXQgJHRoaXMgPSB0aGlzO1xuXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci1jb25zdFxuICAgIGxldCBvcHRpb25zOiBhbnkgPSB7XG4gICAgICBmb3JtYXRSZXN1bHQ6IHRoaXMuZm9ybWF0VmFsdWVzLFxuICAgICAgZm9ybWF0U2VsZWN0aW9uOiB0aGlzLmZvcm1hdFZhbHVlc1xuICAgIH07XG5cbiAgICBpZiAodGhpcy5wbGFjZWhvbGRlciAhPT0gdW5kZWZpbmVkICYmIHRoaXMucGxhY2Vob2xkZXIgIT0gbnVsbCkge1xuICAgICAgb3B0aW9ucy5wbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXI7XG4gICAgfVxuICAgIGlmICh0aGlzLmlzRGlzYWJsZWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmlzRGlzYWJsZWQgIT0gbnVsbCAmJiB0aGlzLmlzRGlzYWJsZWQgPT09IHRydWUpIHtcbiAgICAgIG9wdGlvbnMuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgICAkKCcjc2luZ2xlLXNlbGVjdDItcmVhY3RpdmUtZm9ybS0nICsgdGhpcy5pZCkuc2VsZWN0MihvcHRpb25zKTtcbiAgICBpZiAoXy5pc1VuZGVmaW5lZCh0aGlzLmRlZmF1bHRWYWx1ZSkpIHtcbiAgICAgIGNvbnN0IGEgPSAkKCcjc2luZ2xlLXNlbGVjdDItcmVhY3RpdmUtZm9ybS0nICsgdGhpcy5pZClcbiAgICAgICAgLnNlbGVjdDIoKVxuICAgICAgICAuc2VsZWN0MigndmFsJyk7XG4gICAgICB0aGlzLnZhbHVlID0gXy5maW5kKCR0aGlzLm9wdGlvbnMsIGZ1bmN0aW9uKG8pIHtcbiAgICAgICAgcmV0dXJuIG8udmFsdWUgPT09ICthO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghXy5pc1VuZGVmaW5lZCh0aGlzLmRlZmF1bHRWYWx1ZSkpIHtcbiAgICAgICQoJyNzaW5nbGUtc2VsZWN0Mi1yZWFjdGl2ZS1mb3JtLScgKyB0aGlzLmlkKVxuICAgICAgICAuc2VsZWN0MigpXG4gICAgICAgIC52YWwodGhpcy52YWx1ZS52YWx1ZSlcbiAgICAgICAgLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgIH1cbiAgICAkKCcjc2luZ2xlLXNlbGVjdDItcmVhY3RpdmUtZm9ybS0nICsgdGhpcy5pZCkuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgdmFsdWUgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgJHRoaXMudmFsdWUgPSBfLmZpbmQoJHRoaXMub3B0aW9ucywgZnVuY3Rpb24obykge1xuICAgICAgICByZXR1cm4gby52YWx1ZSA9PT0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIl19