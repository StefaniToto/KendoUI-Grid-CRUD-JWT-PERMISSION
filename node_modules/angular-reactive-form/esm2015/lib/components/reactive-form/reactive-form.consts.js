/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
export const VALIDATOR_REQUIRED = 'required';
/** @type {?} */
export const VALIDATOR_PATTERN = 'pattern';
/** @type {?} */
export const VALIDATOR_MINLENGTH = 'minlength';
/** @type {?} */
export const VALIDATOR_MAXLENGTH = 'maxlength';
import * as _ from 'lodash';
/** @type {?} */
export const UpdateFormValue = (/**
 * @param {?} inputs
 * @param {?} data
 * @param {?=} options
 * @return {?}
 */
(inputs, data, options) => {
    // tslint:disable-next-line:max-line-length
    /** @type {?} */
    const ableSimpleValue = [
        'textbox',
        'dropdown',
        'radio',
        'checkbox',
        'datetimepicker',
        'uploadfile',
        'phonecode',
        'textarea',
        'textbox-mask',
        'tinymce',
        'single-select2',
        'selection-by-api',
        'switch-input',
        'uploadfilev2'
    ];
    _.forEach(data, (/**
     * @param {?} value
     * @param {?} key
     * @return {?}
     */
    function (value, key) {
        inputs = _.map(inputs, (/**
         * @param {?} input
         * @return {?}
         */
        input => {
            if (input.key === key) {
                if (_.includes(ableSimpleValue, input.controlType)) {
                    input.value = value;
                    return input;
                }
                switch (input.controlType) {
                    case 'list-checkbox':
                        input.options = input.options.map((/**
                         * @param {?} item
                         * @return {?}
                         */
                        item => {
                            for (const i of value) {
                                if (item.value === i) {
                                    item.checked = true;
                                }
                            }
                            return item;
                        }));
                        return input;
                        break;
                    case 'select2':
                        input.options = input.options.map((/**
                         * @param {?} item
                         * @return {?}
                         */
                        item => {
                            for (const i of value) {
                                if (item.value === i) {
                                    item.selected = true;
                                }
                            }
                            return item;
                        }));
                        return input;
                        break;
                }
            }
            return input;
        }));
    }));
    return inputs;
});
/** @type {?} */
export const UpdateInputsValue = (/**
 * @param {?} inputs
 * @param {?} data
 * @return {?}
 */
(inputs, data) => {
    /** @type {?} */
    const ableType = ['dropdown', 'radio', 'list-checkbox', 'select2', 'single-select2'];
    _.forEach(data, (/**
     * @param {?} value
     * @param {?} key
     * @return {?}
     */
    function (value, key) {
        _.forEach(inputs, (/**
         * @param {?} input
         * @return {?}
         */
        function (input) {
            if (input.key === key) {
                if (_.includes(ableType, input.controlType)) {
                    input.options = value;
                }
                if (input.controlType === 'dropdown') {
                    input.value = _.head(value);
                }
                if (input.controlType === 'radio') {
                    input.value = _.head(value).value;
                }
            }
        }));
    }));
    return inputs;
});
class Support {
    constructor() {
        this.UpdateInputsValue = (/**
         * @param {?} inputs
         * @param {?} data
         * @return {?}
         */
        (inputs, data) => {
            /** @type {?} */
            const ableType = ['dropdown', 'radio', 'list-checkbox', 'select2', 'single-select2'];
            _.forEach(data, (/**
             * @param {?} value
             * @param {?} key
             * @return {?}
             */
            function (value, key) {
                _.forEach(inputs, (/**
                 * @param {?} input
                 * @return {?}
                 */
                function (input) {
                    if (input.key === key) {
                        if (_.includes(ableType, input.controlType)) {
                            input.options = value;
                        }
                        if (input.controlType === 'dropdown') {
                            input.value = _.head(value);
                        }
                        if (input.controlType === 'radio') {
                            input.value = _.head(value).value;
                        }
                    }
                }));
            }));
            return inputs;
        });
        this.UpdateFormValue = (/**
         * @param {?} inputs
         * @param {?} data
         * @param {?=} options
         * @return {?}
         */
        (inputs, data, options) => {
            // tslint:disable-next-line:max-line-length
            /** @type {?} */
            const ableSimpleValue = [
                'textbox',
                'dropdown',
                'radio',
                'checkbox',
                'datetimepicker',
                'uploadfile',
                'phonecode',
                'textarea',
                'textbox-mask',
                'tinymce',
                'single-select2',
                'selection-by-api',
                'switch-input',
                'uploadfilev2'
            ];
            _.forEach(data, (/**
             * @param {?} value
             * @param {?} key
             * @return {?}
             */
            function (value, key) {
                inputs = _.map(inputs, (/**
                 * @param {?} input
                 * @return {?}
                 */
                input => {
                    if (input.key === key) {
                        if (_.includes(ableSimpleValue, input.controlType)) {
                            input.value = value;
                        }
                        switch (input.controlType) {
                            case 'list-checkbox':
                                input.options = input.options.map((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                item => {
                                    for (const i of value) {
                                        if (item.value === i) {
                                            item.checked = true;
                                        }
                                    }
                                    return item;
                                }));
                                break;
                            case 'select2':
                                input.options = input.options.map((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                item => {
                                    for (const i of value) {
                                        if (item.value === i) {
                                            item.selected = true;
                                        }
                                    }
                                    return item;
                                }));
                                break;
                        }
                    }
                    else {
                        input.value = input.value;
                    }
                    return input;
                }));
            }));
            return inputs;
        });
    }
}
if (false) {
    /** @type {?} */
    Support.prototype.UpdateInputsValue;
    /** @type {?} */
    Support.prototype.UpdateFormValue;
}
/** @type {?} */
export const support = new Support();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVhY3RpdmUtZm9ybS5jb25zdHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9hbmd1bGFyLXJlYWN0aXZlLWZvcm0vIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9yZWFjdGl2ZS1mb3JtL3JlYWN0aXZlLWZvcm0uY29uc3RzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsTUFBTSxPQUFPLGtCQUFrQixHQUFHLFVBQVU7O0FBQzVDLE1BQU0sT0FBTyxpQkFBaUIsR0FBRyxTQUFTOztBQUMxQyxNQUFNLE9BQU8sbUJBQW1CLEdBQUcsV0FBVzs7QUFDOUMsTUFBTSxPQUFPLG1CQUFtQixHQUFHLFdBQVc7QUFFOUMsT0FBTyxLQUFLLENBQUMsTUFBTSxRQUFRLENBQUM7O0FBRTVCLE1BQU0sT0FBTyxlQUFlOzs7Ozs7QUFBRyxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsT0FBWSxFQUFFLEVBQUU7OztVQUV0RCxlQUFlLEdBQUc7UUFDdEIsU0FBUztRQUNULFVBQVU7UUFDVixPQUFPO1FBQ1AsVUFBVTtRQUNWLGdCQUFnQjtRQUNoQixZQUFZO1FBQ1osV0FBVztRQUNYLFVBQVU7UUFDVixjQUFjO1FBQ2QsU0FBUztRQUNULGdCQUFnQjtRQUNoQixrQkFBa0I7UUFDbEIsY0FBYztRQUNkLGNBQWM7S0FDZjtJQUNELENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSTs7Ozs7SUFBRSxVQUFTLEtBQUssRUFBRSxHQUFHO1FBQ2pDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU07Ozs7UUFBRSxLQUFLLENBQUMsRUFBRTtZQUM3QixJQUFJLEtBQUssQ0FBQyxHQUFHLEtBQUssR0FBRyxFQUFFO2dCQUNyQixJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsZUFBZSxFQUFFLEtBQUssQ0FBQyxXQUFXLENBQUMsRUFBRTtvQkFDbEQsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7b0JBQ3BCLE9BQU8sS0FBSyxDQUFDO2lCQUNkO2dCQUNE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QyxXQUFXLEVBQUU7NEJBQ3pCLEtBQUssZUFBZTtnQ0FDbEIsS0FBSyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUc7Ozs7Z0NBQUMsSUFBSSxDQUFDLEVBQUU7b0NBQ3ZDLEtBQUssTUFBTSxDQUFDLElBQUksS0FBSyxFQUFFO3dDQUNyQixJQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssQ0FBQyxFQUFFOzRDQUNwQixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQzt5Q0FDckI7cUNBQ0Y7b0NBQ0QsT0FBTyxJQUFJLENBQUM7Z0NBQ2QsQ0FBQyxFQUFDLENBQUM7Z0NBQ0gsTUFBTTs0QkFDUixLQUFLLFNBQVM7Z0NBQ1osS0FBSyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUc7Ozs7Z0NBQUMsSUFBSSxDQUFDLEVBQUU7b0NBQ3ZDLEtBQUssTUFBTSxDQUFDLElBQUksS0FBSyxFQUFFO3dDQUNyQixJQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssQ0FBQyxFQUFFOzRDQUNwQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQzt5Q0FDdEI7cUNBQ0Y7b0NBQ0QsT0FBTyxJQUFJLENBQUM7Z0NBQ2QsQ0FBQyxFQUFDLENBQUM7Z0NBQ0gsTUFBTTt5QkFDVDtxQkFDRjt5QkFBTTt3QkFDTCxLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7cUJBQzNCO29CQUNELE9BQU8sS0FBSyxDQUFDO2dCQUNmLENBQUMsRUFBQyxDQUFDO1lBQ0wsQ0FBQyxFQUFDLENBQUM7WUFDSCxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDLEVBQUE7SUFDSCxDQUFDO0NBQUE7OztJQTFFQyxvQ0FrQkM7O0lBRUQsa0NBcURDOzs7QUFHSCxNQUFNLE9BQU8sT0FBTyxHQUFHLElBQUksT0FBTyxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IFZBTElEQVRPUl9SRVFVSVJFRCA9ICdyZXF1aXJlZCc7XG5leHBvcnQgY29uc3QgVkFMSURBVE9SX1BBVFRFUk4gPSAncGF0dGVybic7XG5leHBvcnQgY29uc3QgVkFMSURBVE9SX01JTkxFTkdUSCA9ICdtaW5sZW5ndGgnO1xuZXhwb3J0IGNvbnN0IFZBTElEQVRPUl9NQVhMRU5HVEggPSAnbWF4bGVuZ3RoJztcblxuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgY29uc3QgVXBkYXRlRm9ybVZhbHVlID0gKGlucHV0cywgZGF0YSwgb3B0aW9ucz86IHt9KSA9PiB7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcbiAgY29uc3QgYWJsZVNpbXBsZVZhbHVlID0gW1xuICAgICd0ZXh0Ym94JyxcbiAgICAnZHJvcGRvd24nLFxuICAgICdyYWRpbycsXG4gICAgJ2NoZWNrYm94JyxcbiAgICAnZGF0ZXRpbWVwaWNrZXInLFxuICAgICd1cGxvYWRmaWxlJyxcbiAgICAncGhvbmVjb2RlJyxcbiAgICAndGV4dGFyZWEnLFxuICAgICd0ZXh0Ym94LW1hc2snLFxuICAgICd0aW55bWNlJyxcbiAgICAnc2luZ2xlLXNlbGVjdDInLFxuICAgICdzZWxlY3Rpb24tYnktYXBpJyxcbiAgICAnc3dpdGNoLWlucHV0JyxcbiAgICAndXBsb2FkZmlsZXYyJ1xuICBdO1xuICBfLmZvckVhY2goZGF0YSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgIGlucHV0cyA9IF8ubWFwKGlucHV0cywgaW5wdXQgPT4ge1xuICAgICAgaWYgKGlucHV0LmtleSA9PT0ga2V5KSB7XG4gICAgICAgIGlmIChfLmluY2x1ZGVzKGFibGVTaW1wbGVWYWx1ZSwgaW5wdXQuY29udHJvbFR5cGUpKSB7XG4gICAgICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChpbnB1dC5jb250cm9sVHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2xpc3QtY2hlY2tib3gnOlxuICAgICAgICAgICAgaW5wdXQub3B0aW9ucyA9IGlucHV0Lm9wdGlvbnMubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gaSkge1xuICAgICAgICAgICAgICAgICAgaXRlbS5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3NlbGVjdDInOlxuICAgICAgICAgICAgaW5wdXQub3B0aW9ucyA9IGlucHV0Lm9wdGlvbnMubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gaSkge1xuICAgICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGlucHV0cztcbn07XG5cbmV4cG9ydCBjb25zdCBVcGRhdGVJbnB1dHNWYWx1ZSA9IChpbnB1dHMsIGRhdGEpID0+IHtcbiAgY29uc3QgYWJsZVR5cGUgPSBbJ2Ryb3Bkb3duJywgJ3JhZGlvJywgJ2xpc3QtY2hlY2tib3gnLCAnc2VsZWN0MicsICdzaW5nbGUtc2VsZWN0MiddO1xuICBfLmZvckVhY2goZGF0YSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgIF8uZm9yRWFjaChpbnB1dHMsIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICBpZiAoaW5wdXQua2V5ID09PSBrZXkpIHtcbiAgICAgICAgaWYgKF8uaW5jbHVkZXMoYWJsZVR5cGUsIGlucHV0LmNvbnRyb2xUeXBlKSkge1xuICAgICAgICAgIGlucHV0Lm9wdGlvbnMgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQuY29udHJvbFR5cGUgPT09ICdkcm9wZG93bicpIHtcbiAgICAgICAgICBpbnB1dC52YWx1ZSA9IF8uaGVhZCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0LmNvbnRyb2xUeXBlID09PSAncmFkaW8nKSB7XG4gICAgICAgICAgaW5wdXQudmFsdWUgPSBfLmhlYWQodmFsdWUpLnZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gaW5wdXRzO1xufTtcblxuY2xhc3MgU3VwcG9ydCB7XG4gIFVwZGF0ZUlucHV0c1ZhbHVlID0gKGlucHV0cywgZGF0YSkgPT4ge1xuICAgIGNvbnN0IGFibGVUeXBlID0gWydkcm9wZG93bicsICdyYWRpbycsICdsaXN0LWNoZWNrYm94JywgJ3NlbGVjdDInLCAnc2luZ2xlLXNlbGVjdDInXTtcbiAgICBfLmZvckVhY2goZGF0YSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgXy5mb3JFYWNoKGlucHV0cywgZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0LmtleSA9PT0ga2V5KSB7XG4gICAgICAgICAgaWYgKF8uaW5jbHVkZXMoYWJsZVR5cGUsIGlucHV0LmNvbnRyb2xUeXBlKSkge1xuICAgICAgICAgICAgaW5wdXQub3B0aW9ucyA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaW5wdXQuY29udHJvbFR5cGUgPT09ICdkcm9wZG93bicpIHtcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gXy5oZWFkKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlucHV0LmNvbnRyb2xUeXBlID09PSAncmFkaW8nKSB7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IF8uaGVhZCh2YWx1ZSkudmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRzO1xuICB9XG5cbiAgVXBkYXRlRm9ybVZhbHVlID0gKGlucHV0cywgZGF0YSwgb3B0aW9ucz86IHt9KSA9PiB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuICAgIGNvbnN0IGFibGVTaW1wbGVWYWx1ZSA9IFtcbiAgICAgICd0ZXh0Ym94JyxcbiAgICAgICdkcm9wZG93bicsXG4gICAgICAncmFkaW8nLFxuICAgICAgJ2NoZWNrYm94JyxcbiAgICAgICdkYXRldGltZXBpY2tlcicsXG4gICAgICAndXBsb2FkZmlsZScsXG4gICAgICAncGhvbmVjb2RlJyxcbiAgICAgICd0ZXh0YXJlYScsXG4gICAgICAndGV4dGJveC1tYXNrJyxcbiAgICAgICd0aW55bWNlJyxcbiAgICAgICdzaW5nbGUtc2VsZWN0MicsXG4gICAgICAnc2VsZWN0aW9uLWJ5LWFwaScsXG4gICAgICAnc3dpdGNoLWlucHV0JyxcbiAgICAgICd1cGxvYWRmaWxldjInXG4gICAgXTtcbiAgICBfLmZvckVhY2goZGF0YSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgaW5wdXRzID0gXy5tYXAoaW5wdXRzLCBpbnB1dCA9PiB7XG4gICAgICAgIGlmIChpbnB1dC5rZXkgPT09IGtleSkge1xuICAgICAgICAgIGlmIChfLmluY2x1ZGVzKGFibGVTaW1wbGVWYWx1ZSwgaW5wdXQuY29udHJvbFR5cGUpKSB7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzd2l0Y2ggKGlucHV0LmNvbnRyb2xUeXBlKSB7XG4gICAgICAgICAgICBjYXNlICdsaXN0LWNoZWNrYm94JzpcbiAgICAgICAgICAgICAgaW5wdXQub3B0aW9ucyA9IGlucHV0Lm9wdGlvbnMubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0udmFsdWUgPT09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3NlbGVjdDInOlxuICAgICAgICAgICAgICBpbnB1dC5vcHRpb25zID0gaW5wdXQub3B0aW9ucy5tYXAoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gaSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5wdXQudmFsdWUgPSBpbnB1dC52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRzO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBzdXBwb3J0ID0gbmV3IFN1cHBvcnQoKTtcbiJdfQ==